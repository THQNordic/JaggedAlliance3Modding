-- ========== GENERATED BY CharacterEffectCompositeDef Editor DO NOT EDIT MANUALLY! ==========

UndefineClass('LuckyStreak')
DefineClass.LuckyStreak = {
	__parents = { "Perk" },
	__generated_by_class = "CharacterEffectCompositeDef",


	object_class = "Perk",
	unit_reactions = {
		PlaceObj('UnitReaction', {
			Event = "OnEndTurn",
			Handler = function (self, target)
				self:SetParameter("streak", 0)
			end,
		}),
		PlaceObj('UnitReaction', {
			Event = "OnUnitAttack",
			Handler = function (self, target, attacker, action, attack_target, results, attack_args)
				if target == attacker and results.crit and IsKindOf(attack_target, "Unit") then
					local streak = self:ResolveValue("streak") + 1
					if streak >= self:ResolveValue("crits_number") then
						streak = 0
						target:AddStatusEffect("Inspired")
					end
					self:SetParameter("streak", streak)
				end
			end,
		}),
	},
	DisplayName = T(838318520600, --[[CharacterEffectCompositeDef LuckyStreak DisplayName]] "Lucky Streak"),
	Description = T(350209296951, --[[CharacterEffectCompositeDef LuckyStreak Description]] "Become <GameTerm('Inspired')> when you make <em><crits_number></em> <GameTerm('Crits')> in the <em>same</em> turn."),
	OnAdded = function (self, obj)
		self:SetParameter("streak", 0)
	end,
	Icon = "UI/Icons/Perks/LuckyStreak",
	Tier = "Gold",
	Stat = "Agility",
	StatValue = 90,
}

