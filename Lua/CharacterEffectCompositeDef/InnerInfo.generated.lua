-- ========== GENERATED BY CharacterEffectCompositeDef Editor DO NOT EDIT MANUALLY! ==========

UndefineClass('InnerInfo')
DefineClass.InnerInfo = {
	__parents = { "Perk" },
	__generated_by_class = "CharacterEffectCompositeDef",


	object_class = "Perk",
	unit_reactions = {
		PlaceObj('UnitReaction', {
			Event = "OnUnitEnterMapVisual",
			Handler = function (self, target)
				local sector = gv_Sectors[gv_CurrentSectorId]
				if target.HireStatus ~= "Hired" or not sector.intel_discovered then
					 return 
				end
				
				CreateGameTimeThread(function()
					local playVr
					while GetInGameInterfaceMode() == "IModeDeployment" do
						Sleep(20)
					end
					for _, unit in ipairs(g_Units) do
						if unit:IsOnEnemySide(target) then
							unit:RevealTo(target.team)
							unit.innerInfoRevealed = true
							playVr = true
							break
						end
					end
					if playVr then
						Sleep(2000)
						PlayVoiceResponse(target,"PersonalPerkSubtitled")
					end
				end)
			end,
		}),
	},
	DisplayName = T(380316218017, --[[CharacterEffectCompositeDef InnerInfo DisplayName]] "Inside Dope"),
	Description = T(222768539188, --[[CharacterEffectCompositeDef InnerInfo Description]] "<em>Reveals</em> all <em>Enemies</em> if you have <em>Intel</em> for the Sector."),
	Icon = "UI/Icons/Perks/InnerInfo",
	Tier = "Personal",
}

