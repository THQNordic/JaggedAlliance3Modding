-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	DevNotes = "NB: The activity consequences are scripted in CampaignPresetEditor.",
	DisplayName = T(346335410627, --[[QuestsDef SavannaSideQuest DisplayName]] "CÃ´te d'Azur"),
	NoteDefs = {
		LastNoteIdx = 3,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "F5",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('CheckIsPersistentUnitDead', {
							per_ses_id = "NPC_CaptainPierrot",
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set( "BoatLaunched" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.BoatLaunched
							end,
						}),
					},
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatFound" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatFound
					end,
				}),
			},
			Text = T(954280420277, --[[QuestsDef SavannaSideQuest Text]] "<em>Operation</em>: Captain Jacques Pierrot in <em><SectorName('F5')></em> offers naval transport if the \"M.E.R.C.'s Pride\" boat is repaired"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatLaunched" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatLaunched
					end,
				}),
			},
			HideConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					per_ses_id = "NPC_CaptainPierrot",
				}),
			},
			Idx = 2,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatLaunched" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatLaunched
					end,
				}),
			},
			Text = T(890942420173, --[[QuestsDef SavannaSideQuest Text]] "<em>Outcome:</em> M.E.R.C.'s boat is repaired and will be commandeered by Captain Jacques Pierrot as naval transport from <em><SectorName('F5')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					per_ses_id = "NPC_CaptainPierrot",
				}),
			},
			Idx = 3,
			ShowConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					per_ses_id = "NPC_CaptainPierrot",
				}),
			},
			Text = T(367789321496, --[[QuestsDef SavannaSideQuest Text]] "<em>Outcome:</em> <em>Captain Jacques Pierrot</em> is dead"),
		}),
	},
	QuestGroup = "Savanah",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"Beach_Captain01_approach",
					},
					WaitOver = true,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "BeachCaptainMet",
					QuestId = "SavannaSideQuest",
				}),
			},
			Once = true,
			ParamId = "TCE_CaptainApproach",
			QuestId = "SavannaSideQuest",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatFound" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatFound
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"F5",
					},
				}),
			},
			Effects = {
				PlaceObj('SectorEnableCustomOperation', {
					EffectsOnSuccess = {
						PlaceObj('QuestSetVariableBool', {
							Prop = "BoatLaunched",
							QuestId = "RescueBiff",
						}),
					},
					operation = "AbandonedBeach_EnablePort",
					sector_id = "F5",
				}),
			},
			Once = true,
			ParamId = "TCE_EnableBoatOperation",
			QuestId = "SavannaSideQuest",
			requiredSectors = {
				"F5",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitHasInteraction', {
					'TargetUnit', "any merc",
					'CombatAction', "Interact_Disarm",
					'Result', "fail",
					'Group', "SandmanExamine",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "BeachSandmanKicked",
					QuestId = "SavannaSideQuest",
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Beach_Sandman04_kick",
					},
					banterSequentialWaitFor = "BanterLineStart",
					searchInMap = true,
					searchInMarker = false,
				}),
			},
			Once = true,
			ParamId = "TCE_BeachSandmanExploded",
			QuestId = "SavannaSideQuest",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitHasInteraction', {
					'TargetUnit', "any merc",
					'CombatAction', "Interact_LootContainer",
					'Group', "SandmanLoot",
				}),
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_CaptainPierrot",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "BeachSandmanLooted",
					QuestId = "SavannaSideQuest",
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Beach_Sandman02_success",
					},
					banterSequentialWaitFor = "BanterStart",
					searchInMap = true,
					searchInMarker = false,
				}),
			},
			Once = true,
			ParamId = "TCE_BeachSandmanAfterLoot",
			QuestId = "SavannaSideQuest",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatLaunched" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatLaunched
					end,
				}),
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_CaptainPierrot",
				}),
			},
			Effects = {
				PlaceObj('SectorSetPort', {
					sector_id = "F5",
				}),
				PlaceObj('GrantExperienceSector', {
					logImportant = true,
				}),
				PlaceObj('CityGrantLoyalty', {
					Amount = 5,
					City = "Fleatown",
					SpecialConversationMessage = T(318877940064, --[[QuestsDef SavannaSideQuest SpecialConversationMessage]] "established a <em>Port</em> in <em><SectorName('F5')></em>"),
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Beach_MercBoat02_success",
					},
					FallbackToMerc = true,
					banterSequentialWaitFor = "BanterLineStart",
					searchInMarker = false,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Completed",
					QuestId = "SavannaSideQuest",
				}),
			},
			Once = true,
			ParamId = "TCE_BoatLaunched",
			QuestId = "SavannaSideQuest",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_CaptainApproach",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_EnableBoatOperation",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BeachSandmanExploded",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BeachSandmanAfterLoot",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BeachCaptainMet",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BeachSandmanInteracted",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BeachSandmanDisarmed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BeachSandmanLooted",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BeachSandmanKicked",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BoatLaunched",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FosseNoire_OreVein1_Found",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FosseNoire_OreVein2_Found",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FosseNoire_OreVein3_Found",
		}),
	},
	group = "Savanna",
	id = "SavannaSideQuest",
})

