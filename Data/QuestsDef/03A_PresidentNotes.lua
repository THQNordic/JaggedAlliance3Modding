-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Radomir",
	DevNotes = "Most scripting is in 05_TakeDownMajor.",
	DisplayName = T(871707853142, --[[QuestsDef 03A_PresidentNotes DisplayName]] "Saving the President"),
	KillTCEsConditions = {
		PlaceObj('QuestKillTCEsOnCompleted', {}),
	},
	LineVisibleOnGive = 1,
	Main = true,
	NoteDefs = {
		LastNoteIdx = 10,
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"A20",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set( "PresidentLocation" ),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return quest.PresidentLocation
							end,
						}),
						PlaceObj('BanterHasPlayed', {
							Banters = {
								"Radio_BetrayalInvitation",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "05_TakeDownMajor",
							Vars = set( "PresidentDead", "PresidentSaved" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.PresidentDead or quest.PresidentSaved
							end,
						}),
					},
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "03_DefeatTheLegion",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
						return quest.Given
					end,
				}),
			},
			Text = T(664539429937, --[[QuestsDef 03A_PresidentNotes Text]] "<em>President LaFontaine</em> must be rescued"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "02_LiberateErnie",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['02_LiberateErnie'] or QuestGetState('02_LiberateErnie')
						return quest.Completed
					end,
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set( "PortCacaoUnderAttack" ),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return quest.PortCacaoUnderAttack
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao", "LiberatedPortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao or quest.LiberatedPortCacao
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "05_TakeDownMajor",
							Vars = set( "PresidentDead", "PresidentSaved" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.PresidentDead or quest.PresidentSaved
							end,
						}),
					},
				}),
			},
			Idx = 4,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "02_LiberateErnie",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['02_LiberateErnie'] or QuestGetState('02_LiberateErnie')
						return quest.Completed
					end,
				}),
			},
			Text = T(354738261250, --[[QuestsDef 03A_PresidentNotes Text]] "<em>Emma</em> will look for more information about her father's whereabouts in <em>Port Cacao</em>"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"A20",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set( "PresidentLocation" ),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return quest.PresidentLocation
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "05_TakeDownMajor",
							Vars = set( "PresidentDead", "PresidentSaved" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.PresidentDead or quest.PresidentSaved
							end,
						}),
					},
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"Radio_BetrayalInvitation",
					},
				}),
			},
			Text = T(893568035889, --[[QuestsDef 03A_PresidentNotes Text]] "<em>President LaFontaine</em> must be rescued from <em>the Major</em> who is holding him hostage"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "President",
					Sector = "A20",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "05_TakeDownMajor",
					Vars = set( "CombatFinished", "PresidentDead", "PresidentSaved" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.CombatFinished or quest.PresidentDead or quest.PresidentSaved
					end,
				}),
			},
			Idx = 3,
			ShowConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"A20",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set( "PresidentLocation" ),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return quest.PresidentLocation
							end,
						}),
					},
				}),
			},
			Text = T(514248704803, --[[QuestsDef 03A_PresidentNotes Text]] "<em>President LaFontaine</em> must be rescued from the <em>Major's camp</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "President",
					Sector = "A20",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "05_TakeDownMajor",
							Vars = set( "PresidentDead", "PresidentSaved" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.PresidentDead or quest.PresidentSaved
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "03A_PresidentNotes",
							Vars = set( "Completed", "Failed" ),
							__eval = function ()
								local quest = gv_Quests['03A_PresidentNotes'] or QuestGetState('03A_PresidentNotes')
								return quest.Completed or quest.Failed
							end,
						}),
					},
				}),
			},
			Idx = 5,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownMajor",
					Vars = set({
	CombatFinished = true,
	PresidentDead = false,
}),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.CombatFinished and not quest.PresidentDead
					end,
				}),
			},
			Text = T(307084063344, --[[QuestsDef 03A_PresidentNotes Text]] "Time to meet the <em>President</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownMajor",
					Vars = set( "PresidentSaved" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.PresidentSaved
					end,
				}),
			},
			Idx = 6,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownMajor",
					Vars = set( "PresidentSaved" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.PresidentSaved
					end,
				}),
			},
			ShowWhenCompleted = true,
			Text = T(560742718313, --[[QuestsDef 03A_PresidentNotes Text]] "<em>Outcome:</em> <em>President LaFontaine</em> is rescued"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownMajor",
					Vars = set( "PresidentDead" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.PresidentDead
					end,
				}),
			},
			Idx = 7,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownMajor",
					Vars = set( "PresidentDead" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.PresidentDead
					end,
				}),
			},
			ShowWhenCompleted = true,
			Text = T(884950641839, --[[QuestsDef 03A_PresidentNotes Text]] "<em>Outcome:</em> <em>President LaFontaine</em> is dead"),
		}),
	},
	QuestGroup = "The Fate Of Grand Chien",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"President01_Combat_Approach",
						"President02_Saved_Approach",
					},
					WaitOver = true,
				}),
			},
			Effects = {
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Minor",
					logImportant = true,
				}),
				PlaceObj('ApplyGuiltyOrRighteous', {}),
			},
			Once = true,
			ParamId = "TCE_PresidentReached",
			QuestId = "03A_PresidentNotes",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_PresidentReached",
		}),
	},
	group = "Main",
	id = "03A_PresidentNotes",
})

