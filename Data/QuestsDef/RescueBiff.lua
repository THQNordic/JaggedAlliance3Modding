-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Boyan",
	Chapter = "Act1",
	DevNotes = "Some of the script is in the A8 sector def",
	DisplayName = T(507718119258, --[[QuestsDef RescueBiff DisplayName]] "M.E.R.C.: Finding Biff"),
	NoteDefs = {
		LastNoteIdx = 33,
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "Completed", "Failed", "MERC_Diamond", "MERC_Location", "MajorAttackStarted" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Completed or quest.Failed or quest.MERC_Diamond or quest.MERC_Location or quest.MajorAttackStarted
					end,
				}),
			},
			Idx = 9,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Given
					end,
				}),
			},
			Text = T(809832037842, --[[QuestsDef RescueBiff Text]] "A mercenary team from <em>M.E.R.C.</em> went <em>missing in action</em> somewhere on the mainland"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Mission" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Mission
					end,
				}),
			},
			Idx = 29,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Mission" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Mission
					end,
				}),
			},
			Text = T(792226405338, --[[QuestsDef RescueBiff Text]] "<em>Corazon Santiago</em> hired <em>M.E.R.C.</em> and sent them against the <em>Legion</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Boat" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Boat
					end,
				}),
			},
			Idx = 30,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Boat" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Boat
					end,
				}),
			},
			Text = T(613674125364, --[[QuestsDef RescueBiff Text]] "<em>M.E.R.C.</em> had a <em>boat</em> with the <em>Adonis</em> logo on it"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatFound" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatFound
					end,
				}),
			},
			Idx = 12,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BoatFound" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BoatFound
					end,
				}),
			},
			Text = T(823837640996, --[[QuestsDef RescueBiff Text]] "<em>M.E.R.C.</em> wrecked their boat on the shores of Grand Chien"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "D8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "MERC_Diamond", "MERC_DiamondRed" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Diamond or quest.MERC_DiamondRed
					end,
				}),
			},
			Idx = 16,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Carnival" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Carnival
					end,
				}),
			},
			Text = T(734033981064, --[[QuestsDef RescueBiff Text]] "<em>M.E.R.C.</em> was last seen at the <em>Carnival</em> celebrations in <em><SectorName('D8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "A2",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "MERC_Diamond", "MERC_DiamondRedBattle" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Diamond or quest.MERC_DiamondRedBattle
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "Completed", "Failed" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Completed or quest.Failed
					end,
				}),
			},
			Idx = 17,
			ShowConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "RescueBiff",
							Vars = set( "MERC_DiamondRed", "MERC_DiamondRedBattle" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.MERC_DiamondRed or quest.MERC_DiamondRedBattle
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Larry",
							Vars = set( "LarryPantagruel" ),
							__eval = function ()
								local quest = gv_Quests['Larry'] or QuestGetState('Larry')
								return quest.LarryPantagruel
							end,
						}),
					},
				}),
			},
			Text = T(425823933113, --[[QuestsDef RescueBiff Text]] "<em>M.E.R.C.</em> attacked the <em><SectorName('A2')></em> mine with the <em>Maquis</em> of Pantagruel"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Maqui",
					PlaceOnAllOfGroup = true,
					Sector = "A2",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "PantagruelDramas",
							Vars = set( "DRMaquisDead", "DRMaquisLiberated" ),
							__eval = function ()
								local quest = gv_Quests['PantagruelDramas'] or QuestGetState('PantagruelDramas')
								return quest.DRMaquisDead or quest.DRMaquisLiberated
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "RescueBiff",
							Vars = set( "Completed", "Failed", "MERC_Diamond" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.Completed or quest.Failed or quest.MERC_Diamond
							end,
						}),
					},
				}),
			},
			Idx = 13,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "MERC_DiamondRedBattle" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_DiamondRedBattle
					end,
				}),
			},
			Text = T(188429480689, --[[QuestsDef RescueBiff Text]] "Biff and his team from <em>M.E.R.C.</em> might be imprisoned at <em><SectorName('A2')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Chimurenga",
					Sector = "D8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "Completed", "Failed", "MERC_Diamond", "MERC_Location" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Completed or quest.Failed or quest.MERC_Diamond or quest.MERC_Location
					end,
				}),
			},
			Idx = 18,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PantagruelDramas",
					Vars = set( "DRMaquisLiberated" ),
					__eval = function ()
						local quest = gv_Quests['PantagruelDramas'] or QuestGetState('PantagruelDramas')
						return quest.DRMaquisLiberated
					end,
				}),
			},
			Text = T(678124703468, --[[QuestsDef RescueBiff Text]] "<em>M.E.R.C.</em> retreated from Diamond Red when their operation with the Maquis from <em><SectorName('D8')></em> failed"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "A8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "Completed", "Failed", "MERC_Diamond", "MajorAttackStarted" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Completed or quest.Failed or quest.MERC_Diamond or quest.MajorAttackStarted
					end,
				}),
			},
			Idx = 14,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Location" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Location
					end,
				}),
			},
			Text = T(427217791223, --[[QuestsDef RescueBiff Text]] "Biff and his team may be somewhere in the <em>Highlands</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "BiffNPC",
					Sector = "A8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "Completed", "Failed", "MajorAttackStarted" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Completed or quest.Failed or quest.MajorAttackStarted
					end,
				}),
			},
			Idx = 7,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "Given", "MERC_Diamond" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Given and quest.MERC_Diamond
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	MajorAttackStarted = false,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.MajorAttackStarted
					end,
				}),
			},
			Text = T(591688308624, --[[QuestsDef RescueBiff Text]] "<em>Biff Apscott</em> needs rescue at <em><SectorName('A8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "BiffNPC",
					Sector = "A8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival", "Completed", "Failed", "SiegeCombatDone" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival or quest.Completed or quest.Failed or quest.SiegeCombatDone
					end,
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Given
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MajorAttackStarted" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MajorAttackStarted
					end,
				}),
			},
			Text = T(615349961317, --[[QuestsDef RescueBiff Text]] "<em>Biff</em> needs help at <em><SectorName('A8')></em>"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "SiegeCombatDone" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.SiegeCombatDone
					end,
				}),
			},
			Idx = 21,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "ChimurengaAlly" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.ChimurengaAlly
					end,
				}),
			},
			Text = T(187157560554, --[[QuestsDef RescueBiff Text]] "<em>Chimurenga</em> and his Maquis will help fight off the Legion"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival", "BiffGiveDiamond", "Completed", "DiamondGiven_Chimurenga", "Failed" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival or quest.BiffGiveDiamond or quest.Completed or quest.DiamondGiven_Chimurenga or quest.Failed
					end,
				}),
			},
			Idx = 15,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.Given
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "MERC_Diamond" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Diamond
					end,
				}),
			},
			Text = T(926157425390, --[[QuestsDef RescueBiff Text]] "Biff has a valuable <em>green diamond</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Biff",
					Sector = "A8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadInCombat", "BiffDeadOnArrival", "Completed", "Failed" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadInCombat or quest.BiffDeadOnArrival or quest.Completed or quest.Failed
					end,
				}),
			},
			Idx = 31,
			ShowConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_Biff",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	BiffDeadInCombat = false,
	BiffDeadOnArrival = false,
	Completed = false,
	SiegeCombatDone = true,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.BiffDeadInCombat and not quest.BiffDeadOnArrival and not quest.Completed and quest.SiegeCombatDone
					end,
				}),
			},
			Text = T(762548711995, --[[QuestsDef RescueBiff Text]] "Time to have a word with <em>Biff</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "DiamondGiven_Chimurenga" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.DiamondGiven_Chimurenga
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	DiamondGiven_Chimurenga = false,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.DiamondGiven_Chimurenga
					end,
				}),
			},
			Idx = 22,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "DiamondGiven_Chimurenga" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.DiamondGiven_Chimurenga
					end,
				}),
			},
			Text = T(375205332427, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> Convinced Biff to give the <em>green diamond</em> to <em>Chimurenga</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival
					end,
				}),
			},
			Idx = 26,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival
					end,
				}),
			},
			Text = T(594013807575, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> The Legion took the <em>green diamond</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('UnitSquadHasItem', {
					ItemId = "TheGreenDiamond",
				}),
			},
			HideConditions = {
				PlaceObj('UnitSquadHasItem', {
					ItemId = "TheGreenDiamond",
					Negate = true,
				}),
			},
			Idx = 28,
			ShowConditions = {
				PlaceObj('UnitSquadHasItem', {
					ItemId = "TheGreenDiamond",
				}),
			},
			Text = T(388777152335, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> Took possession of the <em>green diamond</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "EmmaGivenDiamond" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.EmmaGivenDiamond
					end,
				}),
			},
			Idx = 24,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "EmmaGivenDiamond" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.EmmaGivenDiamond
					end,
				}),
			},
			Text = T(836450051349, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> Donated the <em>green diamond</em> to <em>Emma</em> for the Museum of the Adjani"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BiffGiveDiamond" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffGiveDiamond
					end,
				}),
			},
			Idx = 23,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "BiffGiveDiamond" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffGiveDiamond
					end,
				}),
			},
			Text = T(605533065112, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> Convinced Biff to hand the <em>green diamond</em> over"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_Biff",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	BiffDeadInCombat = false,
	BiffDeadOnArrival = false,
	BiffGiveDiamond = false,
	Completed = true,
	DiamondGiven_Chimurenga = false,
	EmmaGivenDiamond = false,
	SiegeCombatDone = true,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.BiffDeadInCombat and not quest.BiffDeadOnArrival and not quest.BiffGiveDiamond and quest.Completed and not quest.DiamondGiven_Chimurenga and not quest.EmmaGivenDiamond and quest.SiegeCombatDone
					end,
				}),
			},
			Idx = 25,
			ShowConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_Biff",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	BiffDeadInCombat = false,
	BiffDeadOnArrival = false,
	BiffGiveDiamond = false,
	Completed = true,
	DiamondGiven_Chimurenga = false,
	EmmaGivenDiamond = false,
	SiegeCombatDone = true,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.BiffDeadInCombat and not quest.BiffDeadOnArrival and not quest.BiffGiveDiamond and quest.Completed and not quest.DiamondGiven_Chimurenga and not quest.EmmaGivenDiamond and quest.SiegeCombatDone
					end,
				}),
			},
			Text = T(868834518973, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> Biff took the <em>green diamond</em> home"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "A8",
				}),
			},
			CompletionConditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set( "SiegeCombatDone" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.SiegeCombatDone
							end,
						}),
						PlaceObj('GroupIsDead', {
							Group = "BiffNPC",
							Mode = "any",
							Negate = true,
						}),
					},
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival
					end,
				}),
			},
			Idx = 20,
			ShowConditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set( "SiegeCombatDone" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.SiegeCombatDone
							end,
						}),
						PlaceObj('GroupIsDead', {
							Group = "BiffNPC",
							Mode = "any",
							Negate = true,
						}),
					},
				}),
			},
			Text = T(141787354466, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> <em>Biff</em> was rescued"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set({
	BiffNPC_Killed = false,
}),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return not quest.BiffNPC_Killed
					end,
				}),
			},
			Idx = 19,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadOnArrival" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadOnArrival
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set({
	BiffNPC_Killed = false,
}),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return not quest.BiffNPC_Killed
					end,
				}),
			},
			Text = T(688358393030, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> Appeared too late to save <em>Biff</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadInCombat" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadInCombat
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set({
	BiffNPC_Killed = false,
}),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return not quest.BiffNPC_Killed
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set( "BiffNPC_Killed" ),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return quest.BiffNPC_Killed
					end,
				}),
			},
			Idx = 33,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "BiffDeadInCombat" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.BiffDeadInCombat
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set({
	BiffNPC_Killed = false,
}),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return not quest.BiffNPC_Killed
					end,
				}),
			},
			Text = T(210989349192, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> <em>Biff</em> was killed in action"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "RescueBiff",
							Vars = set( "BiffDeadInCombat", "BiffDeadOnArrival" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.BiffDeadInCombat or quest.BiffDeadOnArrival
							end,
						}),
						PlaceObj('GroupIsDead', {
							Group = "BiffNPC",
						}),
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set( "BiffNPC_Killed" ),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return quest.BiffNPC_Killed
					end,
				}),
			},
			Idx = 32,
			ShowConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "RescueBiff",
							Vars = set( "BiffDeadInCombat", "BiffDeadOnArrival" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.BiffDeadInCombat or quest.BiffDeadOnArrival
							end,
						}),
						PlaceObj('GroupIsDead', {
							Group = "BiffNPC",
						}),
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "_GroupsAttacked",
					Vars = set( "BiffNPC_Killed" ),
					__eval = function ()
						local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
						return quest.BiffNPC_Killed
					end,
				}),
			},
			Text = T(403935996939, --[[QuestsDef RescueBiff Text]] "<em>Outcome:</em> <em>Biff</em> was killed by friendly fire"),
		}),
	},
	QuestGroup = "Other",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "CorazonCaptureMine",
					Vars = set( "TCE_MajorRadio" ),
					__eval = function ()
						local quest = gv_Quests['CorazonCaptureMine'] or QuestGetState('CorazonCaptureMine')
						return quest.TCE_MajorRadio
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableTimer', {
					Prop = "TimePassed",
					QuestId = "RescueBiff",
					TimeAmount = 920,
				}),
			},
			Once = true,
			ParamId = "TCE_StartTimer",
			QuestId = "RescueBiff",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsTCEState', {
					Prop = "TCE_StartTimer",
					QuestId = "RescueBiff",
					Value = "done",
				}),
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestHasTimerPassed', {
							QuestId = "RescueBiff",
							TimerVariable = "TimePassed",
						}),
						PlaceObj('PlayerControlSectors', {
							Amount = 4,
							Condition = ">=",
							POIs = "Mine",
						}),
						PlaceObj('PlayerSquadPresentInSectors', {
							Sector = "B8",
						}),
						PlaceObj('PlayerSquadPresentInSectors', {
							Sector = "A9",
						}),
					},
				}),
				PlaceObj('SatelliteGameplayRunning', {}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	Completed = false,
	Failed = false,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.Completed and not quest.Failed
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "Given",
					QuestId = "RescueBiff",
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Radio_Biff3",
					},
					FallbackToMerc = true,
					anyFallback = true,
					banterSequentialWaitFor = "BanterLineStart",
					searchInMarker = false,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "MajorAttackStarted",
					QuestId = "RescueBiff",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "MERC_Diamond",
					QuestId = "RescueBiff",
				}),
				PlaceObj('TriggerSquadAttack', {
					Squad = "SquadToAttackBif",
					custom_quest_id = "SquadToAttackBif",
					effect_target_sector_ids = {
						"A8",
					},
					reach_quest_id = "RescueBiff",
					reach_quest_var = set( "MajorSquadReachedBiff" ),
					source_sector_id = "B16",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerCall",
			QuestId = "RescueBiff",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('SquadDefeated', {
					custom_squad_id = "SquadToAttackBif",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "MajorAttackStopped",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_DefeatAttackSquad",
			QuestId = "RescueBiff",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	Completed = false,
	Failed = false,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.Completed and not quest.Failed
					end,
				}),
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set( "MajorSquadReachedBiff" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.MajorSquadReachedBiff
							end,
						}),
						PlaceObj('PlayerSquadPresentInSectors', {
							Sector = "A18",
						}),
						PlaceObj('PlayerSquadPresentInSectors', {
							Sector = "B18",
						}),
						PlaceObj('PlayerSquadPresentInSectors', {
							Sector = "B19",
						}),
						PlaceObj('PlayerSquadPresentInSectors', {
							Sector = "B20",
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "Given",
					QuestId = "RescueBiff",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "BiffDeadOnArrival",
					QuestId = "RescueBiff",
				}),
				PlaceObj('SectorSetForceConflict', {
					sector_id = "A8",
				}),
				PlaceObj('CityGrantLoyalty', {
					Amount = -10,
					City = "Pantagruel",
					SpecialConversationMessage = T(812229470317, --[[QuestsDef RescueBiff SpecialConversationMessage]] "<em>Biff</em> is dead"),
				}),
				PlaceObj('GrantExperienceSector', {
					logImportant = true,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Failed",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_BiffDeadOnArrival",
			QuestId = "RescueBiff",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('UnitIsAware', {
							TargetUnit = "Wave1",
						}),
						PlaceObj('UnitIsAware', {
							TargetUnit = "Wave2",
						}),
						PlaceObj('UnitIsAware', {
							TargetUnit = "Wave3",
						}),
						PlaceObj('UnitIsAware', {
							TargetUnit = "Wave4",
						}),
						PlaceObj('UnitIsAware', {
							TargetUnit = "Wave5",
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupAlert', {
					TargetUnit = "BiffNPC",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "ChimurengaWave",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "MERC_Allies",
				}),
			},
			ParamId = "TCE_AwareBiff",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	ChimurengaBiffResolved = false,
	TriggerSiegeCombat = true,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.ChimurengaBiffResolved and quest.TriggerSiegeCombat
					end,
				}),
				PlaceObj('CityHasLoyalty', {
					Amount = 50,
					City = "Pantagruel",
					Condition = "<",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PantagruelDramas",
					Vars = set({
	ChimurengaDead = false,
	ChimurengaLeave = false,
	SucceedChimurenga = false,
}),
					__eval = function ()
						local quest = gv_Quests['PantagruelDramas'] or QuestGetState('PantagruelDramas')
						return not quest.ChimurengaDead and not quest.ChimurengaLeave and not quest.SucceedChimurenga
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "ShouldSpawnChimurenga",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_ShouldSpawnChimurenga",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "TriggerSiegeCombat" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.TriggerSiegeCombat
					end,
				}),
			},
			Effects = {
				PlaceObj('SectorEnableAutoDeploy', {
					sector_id = "A8",
				}),
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "A8",
				}),
				PlaceObj('SetTimer', {
					Label = T(426370137227, --[[QuestsDef RescueBiff Label]] "Siege begins"),
					Name = "BeforeWave1",
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Biff_StartOfFight",
					},
					banterSequentialWaitFor = "BanterLineStart",
					searchInMap = true,
					searchInMarker = false,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnWave1",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerWave1",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "Wave1",
				}),
			},
			Effects = {
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "A8",
				}),
				PlaceObj('SetTimer', {
					Label = T(519836353247, --[[QuestsDef RescueBiff Label]] "Next Wave"),
					Name = "BeforeWave2",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnWave2",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerWave2",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "Wave2",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "ShouldSpawnChimurenga" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.ShouldSpawnChimurenga
					end,
				}),
			},
			Effects = {
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "A8",
				}),
				PlaceObj('SetTimer', {
					Label = T(319107672555, --[[QuestsDef RescueBiff Label]] "Next Wave"),
					Name = "BeforeWaveChimurenga",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnChimurengaWave",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerChimurengaWave",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "RescueBiff",
					Vars = set( "DiamondGiven_Chimurenga" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.DiamondGiven_Chimurenga
					end,
				}),
			},
			Effects = {
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Chimurenga_HelpBiff",
					},
					searchInMap = true,
					searchInMarker = false,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "ChimurengaAlly",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_ChimurengaHelpBiff",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "Wave2",
				}),
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "RescueBiff",
							Vars = set({
	DiamondGiven_Chimurenga = true,
	ShouldSpawnChimurenga = false,
}),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.DiamondGiven_Chimurenga or not quest.ShouldSpawnChimurenga
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "PantagruelDramas",
							Vars = set( "ChimurengaDead", "ChimurengaLeave", "YoungHearts" ),
							__eval = function ()
								local quest = gv_Quests['PantagruelDramas'] or QuestGetState('PantagruelDramas')
								return quest.ChimurengaDead or quest.ChimurengaLeave or quest.YoungHearts
							end,
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "A8",
				}),
				PlaceObj('SetTimer', {
					Label = T(805887361386, --[[QuestsDef RescueBiff Label]] "Next Wave"),
					Name = "BeforeWave3",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnWave3",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerWave3",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "Wave3",
				}),
			},
			Effects = {
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "A8",
				}),
				PlaceObj('SetTimer', {
					Label = T(319107672555, --[[QuestsDef RescueBiff Label]] "Next Wave"),
					Name = "BeforeWave4",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnWave4",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerWave4",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "Wave4",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	MajorAttackStopped = false,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.MajorAttackStopped
					end,
				}),
			},
			Effects = {
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "A8",
				}),
				PlaceObj('SetTimer', {
					Label = T(118911784988, --[[QuestsDef RescueBiff Label]] "Final Wave"),
					Name = "BeforeWave5",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnWave5",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_TriggerWave5",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "Wave4",
				}),
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('GroupIsDead', {
							Group = "Wave5",
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set( "MajorAttackStopped" ),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return quest.MajorAttackStopped
							end,
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('SectorEnterConflict', {
					conflict_mode = false,
					sector_id = "A8",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SiegeCombatDone",
					QuestId = "RescueBiff",
				}),
				PlaceObj('SleepEffect', {
					Sleep = 5000,
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('CheckIsPersistentUnitDead', {
							Negate = true,
							per_ses_id = "NPC_Biff",
						}),
					},
					'Effects', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"Biff_PostCombat",
							},
							searchInMap = true,
							searchInMarker = false,
						}),
					},
					'EffectsElse', {
						PlaceObj('GroupSetBehaviorExit', {
							TargetUnit = "MERC_Allies",
							closest = true,
						}),
					},
				}),
				PlaceObj('GrantExperienceSector', {
					logImportant = true,
				}),
			},
			Once = true,
			ParamId = "TCE_SiegeCombatDone",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "ChimurengaBiffResolved", "SiegeCombatDone" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.ChimurengaBiffResolved and quest.SiegeCombatDone
					end,
				}),
				PlaceObj('GroupIsDead', {
					Group = "ChimurengaWave",
					Negate = true,
				}),
				PlaceObj('UnitIsOnMap', {
					TargetUnit = "Chimurenga",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "ChimurengaAlly",
					QuestId = "RescueBiff",
					Set = false,
				}),
				PlaceObj('GroupSetBehaviorExit', {
					TargetUnit = "ChimurengaWave",
					UseWeapons = true,
					closest = true,
				}),
			},
			Once = true,
			ParamId = "TCE_ChimurengaLeave",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	BiffDeadInCombat = false,
	BiffDeadOnArrival = false,
	Completed = false,
	Failed = false,
	SiegeCombatDone = true,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.BiffDeadInCombat and not quest.BiffDeadOnArrival and not quest.Completed and not quest.Failed and quest.SiegeCombatDone
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Negate = true,
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('PlayerSquadPresentInSectors', {
					Negate = true,
					Sector = "A8",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "BiffLeft",
					QuestId = "RescueBiff",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Completed",
					QuestId = "RescueBiff",
				}),
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Large",
				}),
			},
			Once = true,
			ParamId = "TCE_BiffLeavesWhenAlone",
			QuestId = "RescueBiff",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('CheckIsPersistentUnitDead', {
							per_ses_id = "NPC_Biff",
						}),
						PlaceObj('GroupIsDead', {
							Group = "BiffNPC",
						}),
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	BiffDeadOnArrival = false,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.BiffDeadOnArrival
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "BiffDeadInCombat",
					QuestId = "RescueBiff",
				}),
				PlaceObj('CityGrantLoyalty', {
					Amount = -10,
					City = "Pantagruel",
					SpecialConversationMessage = T(583308245514, --[[QuestsDef RescueBiff SpecialConversationMessage]] "<em>Biff</em> is dead"),
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set({
	TriggerSiegeCombat = false,
}),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return not quest.TriggerSiegeCombat
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "TriggerSiegeCombat",
							QuestId = "RescueBiff",
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownCorazon",
							Vars = set( "CorazonEvidence_Biff" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownCorazon'] or QuestGetState('05_TakeDownCorazon')
								return quest.CorazonEvidence_Biff
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableNum', {
							Amount = -1,
							Prop = "Evidence",
							QuestId = "05_TakeDownCorazon",
						}),
						PlaceObj('LogMessageAdd', {
							message = T(869748045011, --[[QuestsDef RescueBiff message]] "lost a piece of <em>evidence</em> against Corazon"),
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "_GroupsAttacked",
							Vars = set( "BiffNPC_Killed" ),
							__eval = function ()
								local quest = gv_Quests['_GroupsAttacked'] or QuestGetState('_GroupsAttacked')
								return quest.BiffNPC_Killed
							end,
						}),
					},
					'Effects', {
						PlaceObj('ApplyGuiltyOrRighteous', {
							effectType = "negative",
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "RescueBiff",
							Vars = set({
	Completed = false,
}),
							__eval = function ()
								local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
								return not quest.Completed
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "Failed",
							QuestId = "RescueBiff",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_BiffDead",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set( "MERC_Scallion" ),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return quest.MERC_Scallion
					end,
				}),
			},
			Effects = {
				PlaceObj('ExecuteCode', {
					FuncCode = 'if not gv_PortraitOverrides then gv_PortraitOverrides = {} end\ngv_PortraitOverrides["TheMajor"] = "Spike"',
				}),
			},
			ParamId = "TCE_UpdateMajorPortrait",
			QuestId = "RescueBiff",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RescueBiff",
					Vars = set({
	Completed = false,
	SiegeCombatDone = false,
	TriggerSiegeCombat = true,
}),
					__eval = function ()
						local quest = gv_Quests['RescueBiff'] or QuestGetState('RescueBiff')
						return not quest.Completed and not quest.SiegeCombatDone and quest.TriggerSiegeCombat
					end,
				}),
				PlaceObj('CombatIsActive', {}),
				PlaceObj('IsBombardQueued', {
					BombardId = "MainBombardment",
					Negate = true,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"A8",
					},
				}),
			},
			Effects = {
				PlaceObj('BombardEffect', {
					AreaRadius = 5,
					BombardId = "MainBombardment",
					LaunchAngle = 4200,
					LaunchOffset = 12000,
					NumShots = 3,
					Ordnance = "MortarShell_HE",
				}),
			},
			ParamId = "TCE_BiffBattleBombard",
			QuestId = "RescueBiff",
			requiredSectors = {
				"A8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PantagruelDramas",
					Vars = set( "RetireChimurenga" ),
					__eval = function ()
						local quest = gv_Quests['PantagruelDramas'] or QuestGetState('PantagruelDramas')
						return quest.RetireChimurenga
					end,
				}),
				PlaceObj('UnitIsInSector', {
					Negate = true,
					Sector = "D8",
					TargetUnit = "Chimurenga",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "UseSecondChimurengaMarker",
					QuestId = "RescueBiff",
				}),
			},
			Once = true,
			ParamId = "TCE_SecondPantagruelChimurenga",
			QuestId = "RescueBiff",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "BoatFound",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BoatLaunched",
		}),
		PlaceObj('QuestVarBool', {
			Name = "TriggerSiegeCombat",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnWave1",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnWave2",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnWave3",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnWave4",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnWave5",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ShouldSpawnChimurenga",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnChimurengaWave",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ChimurengaBiffResolved",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ChimurengaAlly",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SiegeCombatDone",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BiffDeadOnArrival",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MajorAttackStarted",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MajorAttackStopped",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MajorSquadReachedBiff",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Mission",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Boat",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Carnival",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_DiamondRed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_DiamondRedBattle",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Location",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Crimes",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Diamond",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_Scallion",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MERC_LegionAdonis",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BiffGiveDiamond",
		}),
		PlaceObj('QuestVarBool', {
			Name = "DiamondGiven_Chimurenga",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaGivenDiamond",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BiffLeft",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BiffLeavesWhenAlone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerWave1",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerWave2",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerWave3",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerWave4",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerWave5",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_DefeatAttackSquad",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ShouldSpawnChimurenga",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerChimurengaWave",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ChimurengaHelpBiff",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SiegeCombatDone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ChimurengaLeave",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_AwareBiff",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_StartTimer",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TriggerCall",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BiffDead",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BiffDeadOnArrival",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BiffDeadInCombat",
		}),
		PlaceObj('QuestVarNum', {
			Name = "TimePassed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_UpdateMajorPortrait",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BiffBattleBombard",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SecondPantagruelChimurenga",
		}),
		PlaceObj('QuestVarBool', {
			Name = "UseSecondChimurengaMarker",
		}),
	},
	group = "Global",
	id = "RescueBiff",
})

