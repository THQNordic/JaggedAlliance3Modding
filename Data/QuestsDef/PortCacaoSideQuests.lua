-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	DisplayName = T(561707876212, --[[QuestsDef PortCacaoSideQuests DisplayName]] "Museum of the Adjani"),
	NoteDefs = {
		LastNoteIdx = 25,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set( "PortCacaoUnderAttack" ),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return quest.PortCacaoUnderAttack
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao", "EmmaReached", "LiberatedPortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao or quest.EmmaReached or quest.LiberatedPortCacao
							end,
						}),
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"L8",
							},
						}),
					},
				}),
			},
			Idx = 3,
			Scouting = true,
			ShowConditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set({
	EmmaFleePortCacao = false,
	EmmaReached = false,
	LiberatedPortCacao = false,
}),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return not quest.EmmaFleePortCacao and not quest.EmmaReached and not quest.LiberatedPortCacao
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set({
	PortCacaoUnderAttack = false,
}),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return not quest.PortCacaoUnderAttack
							end,
						}),
					},
				}),
			},
			Text = T(517398973853, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Emma</em> is under attack by the Legion in <em><SectorName('L8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			CompletionConditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFleePortCacao", "EmmaReached", "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFleePortCacao or quest.EmmaReached or quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 4,
			ShowConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"L8",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "03_DefeatTheLegion",
							Vars = set( "PortCacaoUnderAttack" ),
							__eval = function ()
								local quest = gv_Quests['03_DefeatTheLegion'] or QuestGetState('03_DefeatTheLegion')
								return quest.PortCacaoUnderAttack
							end,
						}),
					},
				}),
			},
			Text = T(517398973853, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Emma</em> is under attack by the Legion in <em><SectorName('L8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaReached" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaReached
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFleePortCacao", "L8_SpawnWave1", "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFleePortCacao or quest.L8_SpawnWave1 or quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 24,
			ShowConditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	L8_SpawnWave1 = false,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return not quest.L8_SpawnWave1 and not quest.LiberatedPortCacao
					end,
				}),
			},
			Text = T(592838470858, --[[QuestsDef PortCacaoSideQuests Text]] "Time to check if <em>Emma</em> is okay"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			CompletionConditions = {
				PlaceObj('CombatIsActive', {}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	EmmaReached = true,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaReached and not quest.LiberatedPortCacao
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFleePortCacao", "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFleePortCacao or quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 25,
			ShowConditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	EmmaReached = true,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaReached and not quest.LiberatedPortCacao
					end,
				}),
			},
			Text = T(889264038381, --[[QuestsDef PortCacaoSideQuests Text]] "The <em>Legion</em> is attacking!"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			CompletionConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaMentionTreasures" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaMentionTreasures
							end,
						}),
					},
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFleePortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFleePortCacao
					end,
				}),
			},
			Idx = 20,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	EmmaFleePortCacao = false,
	LiberatedPortCacao = true,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return not quest.EmmaFleePortCacao and quest.LiberatedPortCacao
					end,
				}),
			},
			Text = T(250720600252, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Emma</em> is in <em><SectorName('L8')></em>, waiting for her father to be saved"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 14,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "L8_SpawnWave1" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1
					end,
				}),
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Docks",
							Vars = set( "CacaoGangDead" ),
							__eval = function ()
								local quest = gv_Quests['Docks'] or QuestGetState('Docks')
								return quest.CacaoGangDead
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 4,
							Condition = "<",
							Prop = "CacaoGang",
							QuestId = "Docks",
						}),
					},
				}),
			},
			Text = T(544372911215, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Reinforcements</em>: There are Legion troops coming from the <em>sea</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 15,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	L8_SpawnWave1 = true,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1 and not quest.LiberatedPortCacao
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Docks",
					Vars = set({
	CacaoGangDead = false,
}),
					__eval = function ()
						local quest = gv_Quests['Docks'] or QuestGetState('Docks')
						return not quest.CacaoGangDead
					end,
				}),
				PlaceObj('QuestIsVariableNum', {
					Amount = 4,
					Prop = "CacaoGang",
					QuestId = "Docks",
				}),
			},
			Text = T(432711148181, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Reinforcements failed</em>: The Legion troops from the <em>Docks</em> did not appear because of terminal allergy to <em>Coffee Beans</em>"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 16,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "L8_SpawnWave1" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set({
	KilledInitialEnemies = false,
}),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return not quest.KilledInitialEnemies
					end,
				}),
			},
			Text = T(986440913270, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Reinforcements</em>: There are Legion troops coming from the <em>jungle</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 17,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	L8_SpawnWave1 = true,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1 and not quest.LiberatedPortCacao
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set( "KilledInitialEnemies" ),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.KilledInitialEnemies
					end,
				}),
			},
			Text = T(776054519365, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Reinforcements failed</em>: The Legion troops from the <em>jungle</em> did not appear because life coaching got in the way"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 18,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "L8_SpawnWave1" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "OldDiamond",
					Vars = set({
	ImpostorsKilled = false,
}),
					__eval = function ()
						local quest = gv_Quests['OldDiamond'] or QuestGetState('OldDiamond')
						return not quest.ImpostorsKilled
					end,
				}),
			},
			Text = T(302191557085, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Reinforcements</em>: There are Legion troops coming from a nearby <em>mine</em> that are disguised as mine workers"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "LiberatedPortCacao" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.LiberatedPortCacao
					end,
				}),
			},
			Idx = 19,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	L8_SpawnWave1 = true,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1 and not quest.LiberatedPortCacao
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "OldDiamond",
					Vars = set( "ImpostorsKilled" ),
					__eval = function ()
						local quest = gv_Quests['OldDiamond'] or QuestGetState('OldDiamond')
						return quest.ImpostorsKilled
					end,
				}),
			},
			Text = T(372296929645, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Reinforcements failed</em>: The Legion troops from <em>Old Diamond</em> did not appear because of terminal affliction of Impostor syndrome"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao
							end,
						}),
					},
				}),
			},
			Idx = 5,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaMentionTreasures" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaMentionTreasures
					end,
				}),
			},
			Text = T(467664660708, --[[QuestsDef PortCacaoSideQuests Text]] "Emma needs <em>archeological treasures</em> that will be presented in a future Museum of the Adjani in in <em><SectorName('L8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Emma",
					Sector = "L8",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Condition = "<=",
							Prop = "EmmaTreasures",
							QuestId = "PortCacaoSideQuests",
						}),
					},
				}),
			},
			Idx = 6,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaPayment" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaPayment
					end,
				}),
				PlaceObj('QuestIsVariableNum', {
					Condition = ">",
					Prop = "EmmaTreasures",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Text = T(544699249776, --[[QuestsDef PortCacaoSideQuests Text]] "Emma can send <em>militia</em> to <em><EmmaTreasures></em> location(s)"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Gouvernour",
					Sector = "L8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFunding" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFunding
					end,
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao
							end,
						}),
					},
				}),
			},
			Idx = 7,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaMentionGovernor", "EmmaPayment" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaMentionGovernor and quest.EmmaPayment
					end,
				}),
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_Gouvernour",
				}),
				PlaceObj('CheckIsPersistentUnitDead', {
					Negate = true,
					per_ses_id = "NPC_MrsGouvernour",
				}),
			},
			Text = T(877715912274, --[[QuestsDef PortCacaoSideQuests Text]] "The <em>gouverneur</em> in <em><SectorName('L8')></em> can be convinced to provide funding for Emma's <em>Museum of the Adjani</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFunding" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFunding
					end,
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
						PlaceObj('CheckIsPersistentUnitDead', {
							per_ses_id = "NPC_Gouvernour",
						}),
						PlaceObj('CheckIsPersistentUnitDead', {
							per_ses_id = "NPC_MrsGouvernour",
						}),
					},
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "EmmaFunding" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.EmmaFunding
					end,
				}),
			},
			ShowWhenCompleted = true,
			Text = T(443437158397, --[[QuestsDef PortCacaoSideQuests Text]] "The gouverneur agreed to provide payment for <em>treasures</em> brought to Emma for the <em>Museum</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Faucheux",
					Sector = "K16",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "04_Betrayal",
							Vars = set( "FaucheuxMet" ),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return quest.FaucheuxMet
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "04_Betrayal",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return quest.Completed
							end,
						}),
					},
				}),
			},
			Idx = 9,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownFaucheux",
					Vars = set( "FaucheuxInvite" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownFaucheux'] or QuestGetState('05_TakeDownFaucheux')
						return quest.FaucheuxInvite
					end,
				}),
			},
			Text = T(572118247169, --[[QuestsDef PortCacaoSideQuests Text]] "Received clearance to speak with <em>Col. Faucheux</em> in <em><SectorName('K16')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Faucheux",
					Sector = "K16",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "05_TakeDownFaucheux",
					Vars = set( "Completed", "FaucheuxArtLooted" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownFaucheux'] or QuestGetState('05_TakeDownFaucheux')
						return quest.Completed or quest.FaucheuxArtLooted
					end,
				}),
			},
			Idx = 10,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownFaucheux",
					Vars = set( "FaucheuxArt" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownFaucheux'] or QuestGetState('05_TakeDownFaucheux')
						return quest.FaucheuxArt
					end,
				}),
			},
			Text = T(573991411891, --[[QuestsDef PortCacaoSideQuests Text]] "Col. Faucheux keeps valuable <em>art pieces</em> hidden at <em><SectorName('K16')></em> inside something that is a <em>work of art</em> itself "),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.Completed
					end,
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.Completed
					end,
				}),
			},
			Text = T(331936898933, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Outcome:</em> <em>Emma</em> left <em><SectorName('L8')></em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "Failed" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.Failed
					end,
				}),
			},
			Idx = 23,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set( "Failed" ),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.Failed
					end,
				}),
			},
			Text = T(495855271095, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Outcome:</em> <em>Emma</em> was forced to leave <em><SectorName('L8')></em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
					},
				}),
				PlaceObj('QuestIsVariableNum', {
					Amount = 1,
					Prop = "EmmaTreasuresTotal",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Idx = 21,
			ShowConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaFleePortCacao" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaFleePortCacao
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "05_TakeDownMajor",
							Vars = set( "Completed" ),
							__eval = function ()
								local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
								return quest.Completed
							end,
						}),
					},
				}),
				PlaceObj('QuestIsVariableNum', {
					Amount = 1,
					Prop = "EmmaTreasuresTotal",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			ShowWhenCompleted = true,
			Text = T(358239048680, --[[QuestsDef PortCacaoSideQuests Text]] "<em>Outcome:</em> <em><EmmaTreasuresTotal> treasures</em> donated for the <em>Museum of the Adjani</em>"),
		}),
	},
	QuestGroup = "Port Cacao",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "LegionWave",
				}),
				PlaceObj('GroupIsDead', {
					Group = "EnemySquad",
				}),
			},
			Effects = {
				PlaceObj('SectorEnterConflict', {
					conflict_mode = false,
					sector_id = "L8",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "LiberatedPortCacao",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_LiberatedPortCacao",
			QuestId = "PortCacaoSideQuests",
			requiredSectors = {
				"L8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	Completed = false,
	LiberatedPortCacao = true,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return not quest.Completed and quest.LiberatedPortCacao
					end,
				}),
				PlaceObj('SectorCheckOwner', {
					owner = "any enemy",
					sector_id = "L8",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "EmmaFleePortCacao",
					QuestId = "PortCacaoSideQuests",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Failed",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_EmmaFlee",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "05_TakeDownMajor",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['05_TakeDownMajor'] or QuestGetState('05_TakeDownMajor')
						return quest.Completed
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	Failed = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return not quest.Failed
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "EmmaFleePortCacao",
					QuestId = "PortCacaoSideQuests",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Completed",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_EmmaDone",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"PortCacaoCity_Frederic_04",
					},
					WaitOver = true,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "FredericStash",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_FredericStash",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"PortCacaoCity_MrsGouvernour_09",
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "EmmaMuseumApproved",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_MuseumApproved",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"PortCacaoCity_Gouverneur_12",
						"PortCacaoCity_Gouverneur_13",
					},
					WaitOver = true,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "EmmaFunding",
					QuestId = "PortCacaoSideQuests",
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"PortCacaoCity_Gouverneur_14",
					},
					banterSequentialWaitFor = "BanterStart",
					searchInMap = true,
					searchInMarker = false,
				}),
			},
			Once = true,
			ParamId = "TCE_MuseumFunding",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 12,
					SecondTargetUnit = "Emma",
					TargetUnit = "any merc",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "EmmaReached",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_EmmaReached",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return not quest.LiberatedPortCacao
					end,
				}),
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('GroupIsDead', {
							Group = "EnemySquad",
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PortCacaoSideQuests",
							Vars = set( "EmmaReached" ),
							__eval = function ()
								local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
								return quest.EmmaReached
							end,
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('SetTimer', {
					Label = T(682932359448, --[[QuestsDef PortCacaoSideQuests Label]] "Enemy Reinforcements Incoming"),
					Name = "L8_EnemyWave1",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "L8_SpawnWave1",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_L8_WaveTrigger",
			QuestId = "PortCacaoSideQuests",
			requiredSectors = {
				"L8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"L8",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PortCacaoSideQuests",
					Vars = set({
	L8_SpawnWave1 = true,
	LiberatedPortCacao = false,
}),
					__eval = function ()
						local quest = gv_Quests['PortCacaoSideQuests'] or QuestGetState('PortCacaoSideQuests')
						return quest.L8_SpawnWave1 and not quest.LiberatedPortCacao
					end,
				}),
				PlaceObj('UnitIsAware', {
					TargetUnit = "LegionWave",
				}),
			},
			Effects = {
				PlaceObj('GroupAlert', {
					TargetUnit = "EnemySquad",
				}),
			},
			Once = true,
			ParamId = "TCE_AlertEnemySquad",
			QuestId = "PortCacaoSideQuests",
			requiredSectors = {
				"L8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsAroundMarkerOfGroup', {
					MarkerGroup = "Detect_Wave",
					TargetUnit = "LegionWave",
				}),
			},
			Effects = {
				PlaceObj('GroupSetArchetype', {
					Archetype = "GuardArea",
					TargetUnit = "LegionWave_Shooters",
				}),
				PlaceObj('GroupSetArchetype', {
					Archetype = "GuardArea",
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupSetArchetype', {
					Archetype = "GuardArea",
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_Barricades_1",
					},
					TargetUnit = "LegionWave_Shooters",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_Barricades_FlankEast",
					},
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_Barricades_FlankWest",
					},
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Docks",
							Vars = set({
	CacaoGangDead = false,
}),
							__eval = function ()
								local quest = gv_Quests['Docks'] or QuestGetState('Docks')
								return not quest.CacaoGangDead
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 4,
							Prop = "CacaoGang",
							QuestId = "Docks",
						}),
					},
					'Effects', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"PortCacaoCity_LegionReinforcementFail_Docks",
							},
							searchInMap = true,
							searchInMarker = false,
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Hermit",
							Vars = set( "KilledInitialEnemies" ),
							__eval = function ()
								local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
								return quest.KilledInitialEnemies
							end,
						}),
					},
					'Effects', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"PortCacaoCity_LegionReinforcementFail_Hermit",
							},
							searchInMap = true,
							searchInMarker = false,
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "OldDiamond",
							Vars = set( "ImpostorsKilled" ),
							__eval = function ()
								local quest = gv_Quests['OldDiamond'] or QuestGetState('OldDiamond')
								return quest.ImpostorsKilled
							end,
						}),
					},
					'Effects', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"PortCacaoCity_LegionReinforcementFail_OldDiamond",
							},
							searchInMap = true,
							searchInMarker = false,
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_Assign_Waves_Initial",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('PlayerIsPlayerTurn', {}),
						PlaceObj('CombatTurn', {
							Amount = 2,
							Condition = ">=",
						}),
						PlaceObj('UnitIsAroundMarkerOfGroup', {
							MarkerGroup = "FightArea_Barricades_FlankEast",
							TargetUnit = "LegionWave_Flankers_East",
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupAssignToArea', {
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupAddStatusEffect', {
					Status = "Mobile",
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_Flank_MidpointEast",
					},
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('QuestSetVariableNum', {
					Amount = 1,
					Prop = "NewCombatTurn",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_FlankEast_Start",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('PlayerIsPlayerTurn', {}),
						PlaceObj('CombatTurn', {
							Amount = 2,
							Condition = ">=",
						}),
						PlaceObj('UnitIsAroundMarkerOfGroup', {
							MarkerGroup = "FightArea_Barricades_FlankWest",
							TargetUnit = "LEgionWave_Flankers_West",
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupAssignToArea', {
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('GroupAddStatusEffect', {
					Status = "Mobile",
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_Flank_MidpointWest",
					},
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('QuestSetVariableNum', {
					Amount = 1,
					Prop = "NewCombatTurn",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_FlankWest_Start",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('CombatTurn', {
					Amount = 3,
					Condition = ">=",
				}),
			},
			Effects = {
				PlaceObj('GroupSetArchetype', {
					TargetUnit = "LegionWave_Shooters",
				}),
			},
			Once = true,
			ParamId = "TCE_Free_Shooters",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Condition = ">",
							Prop = "NewCombatTurn",
							QuestId = "PortCacaoSideQuests",
						}),
						PlaceObj('OR', {
							Conditions = {
								PlaceObj('UnitIsAroundMarkerOfGroup', {
									MarkerGroup = "FightArea_Flank_MidpointWest",
									TargetUnit = "LEgionWave_Flankers_West",
								}),
								PlaceObj('UnitIsAroundMarkerOfGroup', {
									MarkerGroup = "FightArea_Flank_MidpointEast",
									TargetUnit = "LegionWave_Flankers_East",
								}),
							},
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupAssignToArea', {
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('GroupAssignToArea', {
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_BackEntrance",
					},
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupAssignToArea', {
					IndividualAreas = {
						"FightArea_BackEntrance",
					},
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('GroupAddStatusEffect', {
					Status = "Mobile",
					TargetUnit = "LegionWave_Flankers_East",
				}),
				PlaceObj('GroupAddStatusEffect', {
					Status = "Mobile",
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('QuestSetVariableNum', {
					Amount = 10,
					Prop = "NewCombatTurn",
					QuestId = "PortCacaoSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_Flank_Backdoor",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 10,
							Condition = ">",
							Prop = "NewCombatTurn",
							QuestId = "PortCacaoSideQuests",
						}),
						PlaceObj('OR', {
							Conditions = {
								PlaceObj('UnitIsAroundMarkerOfGroup', {
									MarkerGroup = "FightArea_BackEntrance",
									TargetUnit = "LEgionWave_Flankers_West",
								}),
								PlaceObj('UnitIsAroundMarkerOfGroup', {
									MarkerGroup = "FightArea_BackEntrance",
									TargetUnit = "LegionWave_Flankers_East",
								}),
							},
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupSetArchetype', {
					TargetUnit = "LEgionWave_Flankers_West",
				}),
				PlaceObj('GroupSetArchetype', {
					TargetUnit = "LegionWave_Flankers_East",
				}),
			},
			Once = true,
			ParamId = "TCE_Flank_Backdoor_Free",
			QuestId = "PortCacaoSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"K16",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "04_Betrayal",
					Vars = set({
	TriggerWorldFlip = false,
}),
					__eval = function ()
						local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
						return not quest.TriggerWorldFlip
					end,
				}),
			},
			Effects = {
				PlaceObj('ExecuteCode', {
					FuncCode = 'table.map(table.find_value(g_Teams, "side", "ally").units, function(u) u.immortal = true end)',
				}),
			},
			ParamId = "TCE_MakeBrigandAllyImmortal",
			QuestId = "PortCacaoSideQuests",
			requiredSectors = {
				"K16",
			},
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "InitialCombatActive",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaReached",
		}),
		PlaceObj('QuestVarBool', {
			Name = "LiberatedPortCacao",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaFleePortCacao",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FredericStash",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FredericStashRobbed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "JunkShopOpen",
		}),
		PlaceObj('QuestVarBool', {
			Name = "JunkShopMoney",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_LiberatedPortCacao",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_EmmaFlee",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_EmmaDone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_FredericStash",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MuseumApproved",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MuseumFunding",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaMentionTreasures",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaPayment",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaMentionGovernor",
		}),
		PlaceObj('QuestVarNum', {
			Name = "EmmaTreasures",
		}),
		PlaceObj('QuestVarNum', {
			Name = "EmmaTreasuresTotal",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaMuseumApproved",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaFunding",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_L8_WaveTrigger",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_EmmaReached",
		}),
		PlaceObj('QuestVarBool', {
			Name = "L8_SpawnWave1",
		}),
		PlaceObj('QuestVarNum', {
			Name = "NewCombatTurn",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Assign_Waves_Initial",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_AlertEnemySquad",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_FlankEast_Start",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_FlankWest_Start",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Free_Shooters",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Flank_Backdoor",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Flank_Backdoor_Free",
		}),
		PlaceObj('QuestVarBool', {
			Name = "RedHenWins",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BlueHenWins",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MakeBrigandAllyImmortal",
		}),
		PlaceObj('QuestVarBool', {
			Name = "EmmaConversationInfoXP",
		}),
	},
	group = "PortCacao",
	id = "PortCacaoSideQuests",
})

