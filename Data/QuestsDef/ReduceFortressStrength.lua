-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Vlad",
	Chapter = "Intro",
	DevNotes = "Link between Ernie quests and Guardpost strength mechanic",
	DisplayName = T(854842935930, --[[QuestsDef ReduceFortressStrength DisplayName]] "How to reduce the Fort's defenses"),
	Hidden = true,
	KillTCEsConditions = {
		PlaceObj('QuestKillTCEsOnCompleted', {}),
	},
	NoteDefs = {
		LastNoteIdx = 4,
	},
	QuestGroup = "Ernie Island",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "ErnieSideQuests",
					Vars = set( "DeedeeDead", "DeedeeDissuaded" ),
					__eval = function ()
						local quest = gv_Quests['ErnieSideQuests'] or QuestGetState('ErnieSideQuests')
						return quest.DeedeeDead or quest.DeedeeDissuaded
					end,
				}),
				PlaceObj('GuardpostObjectiveDone', {
					GuardpostObjective = "EmeraldCoast",
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('CompleteGuardpostObjective', {
					GuardpostObjective = "EmeraldCoast",
				}),
			},
			Once = true,
			ParamId = "TCE_EmeraldCoastDone",
			QuestId = "ReduceFortressStrength",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('SectorCheckOwner', {
					sector_id = "H3_Underground",
				}),
				PlaceObj('GuardpostObjectiveDone', {
					GuardpostObjective = "Bunker",
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('CompleteGuardpostObjective', {
					GuardpostObjective = "Bunker",
				}),
			},
			Once = true,
			ParamId = "TCE_BunkerDone",
			QuestId = "ReduceFortressStrength",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "JoseFamily",
					Vars = {
						DiamondsRunAway = true,
						DropWeapons = true,
						JoseBanished = true,
						JoseKilled = true,
						RunAway = true,
					},
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.DiamondsRunAway or quest.DropWeapons or quest.JoseBanished or quest.JoseKilled or quest.RunAway
					end,
				}),
				PlaceObj('GuardpostObjectiveDone', {
					GuardpostObjective = "Bastien",
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('CompleteGuardpostObjective', {
					GuardpostObjective = "Bastien",
				}),
			},
			Once = true,
			ParamId = "TCE_BastienDone",
			QuestId = "ReduceFortressStrength",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ReduceFortressStrength",
					Vars = set( "Given_Bunker" ),
					__eval = function ()
						local quest = gv_Quests['ReduceFortressStrength'] or QuestGetState('ReduceFortressStrength')
						return quest.Given_Bunker
					end,
				}),
				PlaceObj('GuardpostObjectiveDone', {
					GuardpostObjective = "Bunker",
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ShowGuardpostObjective', {
					GuardpostObjective = "Bunker",
				}),
			},
			Once = true,
			ParamId = "TCE_GivenBunker",
			QuestId = "ReduceFortressStrength",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ReduceFortressStrength",
					Vars = set( "Given_Deedee" ),
					__eval = function ()
						local quest = gv_Quests['ReduceFortressStrength'] or QuestGetState('ReduceFortressStrength')
						return quest.Given_Deedee
					end,
				}),
				PlaceObj('GuardpostObjectiveDone', {
					GuardpostObjective = "EmeraldCoast",
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ShowGuardpostObjective', {
					GuardpostObjective = "EmeraldCoast",
				}),
			},
			Once = true,
			ParamId = "TCE_GivenDeedee",
			QuestId = "ReduceFortressStrength",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ReduceFortressStrength",
					Vars = set( "Given_Bastien" ),
					__eval = function ()
						local quest = gv_Quests['ReduceFortressStrength'] or QuestGetState('ReduceFortressStrength')
						return quest.Given_Bastien
					end,
				}),
				PlaceObj('GuardpostObjectiveDone', {
					GuardpostObjective = "Bastien",
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ShowGuardpostObjective', {
					GuardpostObjective = "Bastien",
				}),
			},
			Once = true,
			ParamId = "TCE_GivenBastien",
			QuestId = "ReduceFortressStrength",
		}),
	},
	Variables = {
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BunkerDone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_EmeraldCoastDone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BastienDone",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given_Bunker",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given_Deedee",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given_Bastien",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FortConflict_Started",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_GivenBunker",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_GivenDeedee",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_GivenBastien",
		}),
	},
	group = "Outposts",
	id = "ReduceFortressStrength",
})

