-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Radomir",
	Chapter = "Intro",
	DisplayName = T(305024834639, --[[QuestsDef JoseFamily DisplayName]] "Bastien"),
	KillTCEsConditions = {
		PlaceObj('QuestKillTCEsOnCompleted', {}),
	},
	NoteDefs = {
		LastNoteIdx = 17,
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "JoseFamily",
					Vars = set( "DiamondsRunAway", "DropWeapons", "JoseBanished", "JoseKilled", "JoseKilledInFortress", "JoseRustConversationDone" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.DiamondsRunAway or quest.DropWeapons or quest.JoseBanished or quest.JoseKilled or quest.JoseKilledInFortress or quest.JoseRustConversationDone
					end,
				}),
			},
			Idx = 17,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "BastienMet" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.BastienMet
					end,
				}),
			},
			Text = T(477469225116, --[[QuestsDef JoseFamily Text]] "Met a shady guy named <em>Bastien</em> at the beach of <SectorName('I1')>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "H3",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "JoseFamily",
					Vars = set( "JoseBanished", "JoseKilled", "JoseKilledInFortress", "JoseRustConversationDone" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.JoseBanished or quest.JoseKilled or quest.JoseKilledInFortress or quest.JoseRustConversationDone
					end,
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "LeadFamily" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.LeadFamily
					end,
				}),
			},
			Text = T(752553629173, --[[QuestsDef JoseFamily Text]] "Bastien and his family have a hideout in <em><SectorName('H3')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "BaconDiamonds" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.BaconDiamonds
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "JoseFamily",
					Vars = set( "JoseBanished", "JoseKilled", "JoseKilledInFortress", "JoseRustConversationDone" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.JoseBanished or quest.JoseKilled or quest.JoseKilledInFortress or quest.JoseRustConversationDone
					end,
				}),
			},
			Idx = 10,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "BaconDiamonds" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.BaconDiamonds
					end,
				}),
			},
			Text = T(834582852936, --[[QuestsDef JoseFamily Text]] "Bastien has a <em>diamond stash</em> somewhere"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "JoseBanished" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.JoseBanished
					end,
				}),
			},
			Idx = 12,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "JoseBanished" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.JoseBanished
					end,
				}),
			},
			Text = T(871353489202, --[[QuestsDef JoseFamily Text]] "<em>Outcome:</em> Tricked Bastien's family and turned them against him"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "DropWeapons" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.DropWeapons
					end,
				}),
			},
			Idx = 13,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "DropWeapons" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.DropWeapons
					end,
				}),
			},
			Text = T(782710278804, --[[QuestsDef JoseFamily Text]] "<em>Outcome:</em> Disarmed Bastien's family"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "JoseFamily",
							Vars = set( "Completed", "Failed", "JoseKilled" ),
							__eval = function ()
								local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
								return quest.Completed or quest.Failed or quest.JoseKilled
							end,
						}),
						PlaceObj('UnitIsOnMap', {
							TargetUnit = "LegionRaider_Jose",
						}),
					},
				}),
			},
			Idx = 11,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set({
	JoseKilled = false,
	JoseRustConversationDone = true,
}),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return not quest.JoseKilled and quest.JoseRustConversationDone
					end,
				}),
			},
			Text = T(344924091355, --[[QuestsDef JoseFamily Text]] "<em>Bastien</em> has disappeared"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "E9",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "JoseFamily",
							Vars = set( "BastienMetRefugeeCamp", "JoseKilled" ),
							__eval = function ()
								local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
								return quest.BastienMetRefugeeCamp or quest.JoseKilled
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "04_Betrayal",
							Vars = set( "TriggerWorldFlip", "WorldFlipDone" ),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return quest.TriggerWorldFlip or quest.WorldFlipDone
							end,
						}),
					},
				}),
			},
			Idx = 7,
			Scouting = true,
			ShowConditions = {
				PlaceObj('AND', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "JoseFamily",
							Vars = set({
	BastienMetRefugeeCamp = false,
	JoseKilled = false,
}),
							__eval = function ()
								local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
								return not quest.BastienMetRefugeeCamp and not quest.JoseKilled
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "04_Betrayal",
							Vars = set({
	TriggerWorldFlip = false,
	WorldFlipDone = false,
}),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return not quest.TriggerWorldFlip and not quest.WorldFlipDone
							end,
						}),
					},
				}),
			},
			Text = T(328052365031, --[[QuestsDef JoseFamily Text]] "Bastien is in the <em><SectorName('E9')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "E9",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "BastienMetRefugeeCamp" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.BastienMetRefugeeCamp
					end,
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "JoseFamily",
							Vars = set( "JoseKilled" ),
							__eval = function ()
								local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
								return quest.JoseKilled
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "04_Betrayal",
							Vars = set( "TriggerWorldFlip", "WorldFlipDone" ),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return quest.TriggerWorldFlip or quest.WorldFlipDone
							end,
						}),
					},
				}),
			},
			Idx = 15,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "BastienMetRefugeeCamp" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.BastienMetRefugeeCamp
					end,
				}),
			},
			Text = T(328052365031, --[[QuestsDef JoseFamily Text]] "Bastien is in the <em><SectorName('E9')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RefugeeBlues",
					Vars = set( "BastienProBono" ),
					__eval = function ()
						local quest = gv_Quests['RefugeeBlues'] or QuestGetState('RefugeeBlues')
						return quest.BastienProBono
					end,
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RefugeeBlues",
					Vars = set( "BastienProBono" ),
					__eval = function ()
						local quest = gv_Quests['RefugeeBlues'] or QuestGetState('RefugeeBlues')
						return quest.BastienProBono
					end,
				}),
			},
			Text = T(962724794725, --[[QuestsDef JoseFamily Text]] "<em>Outcome:</em> Forced Bastien to help the people in the <em><SectorName('E9')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RefugeeBlues",
					Vars = set( "BastienShare" ),
					__eval = function ()
						local quest = gv_Quests['RefugeeBlues'] or QuestGetState('RefugeeBlues')
						return quest.BastienShare
					end,
				}),
			},
			Idx = 14,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "RefugeeBlues",
					Vars = set( "BastienShare" ),
					__eval = function ()
						local quest = gv_Quests['RefugeeBlues'] or QuestGetState('RefugeeBlues')
						return quest.BastienShare
					end,
				}),
			},
			Text = T(846691852563, --[[QuestsDef JoseFamily Text]] "<em>Outcome:</em> Took part in Bastien's shady deals in the <em><SectorName('E9')></em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "JoseKilled" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.JoseKilled
					end,
				}),
			},
			Idx = 9,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set( "JoseKilled" ),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return quest.JoseKilled
					end,
				}),
			},
			Text = T(449770949334, --[[QuestsDef JoseFamily Text]] "<em>Outcome:</em> Killed <em>Bastien</em>"),
		}),
	},
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set({
	Completed = false,
	Failed = false,
	Given = true,
	JoseRustConversationDone = false,
}),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return not quest.Completed and not quest.Failed and quest.Given and not quest.JoseRustConversationDone
					end,
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
					sector_id = "H3",
				}),
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 12,
					SecondTargetUnit = "JoseFamily_All",
					TargetUnit = "any merc",
				}),
				PlaceObj('CheckExpression', {
					Expression = function (self, obj) return AllUnitsOfGroupAreNeutral("JoseFamily_All") end,
				}),
			},
			Effects = {
				PlaceObj('UnitStartConversation', {
					Conversation = "Jose_2",
				}),
			},
			Once = true,
			ParamId = "TCE_StartSecondConvo",
			QuestId = "JoseFamily",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "JoseFamily",
					Vars = set({
	Completed = false,
	Failed = false,
	Given = true,
	JoseRustConversationDone = false,
}),
					__eval = function ()
						local quest = gv_Quests['JoseFamily'] or QuestGetState('JoseFamily')
						return not quest.Completed and not quest.Failed and quest.Given and not quest.JoseRustConversationDone
					end,
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
					sector_id = "H3",
				}),
				PlaceObj('UnitIsAroundOtherUnit', {
					SecondTargetUnit = "JoseFamily_All",
					TargetUnit = "any merc",
				}),
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"JoseFamilyBanter",
					},
					WaitOver = true,
				}),
				PlaceObj('CheckExpression', {
					Expression = function (self, obj) return AllUnitsOfGroupAreNeutral("JoseFamily_All") end,
				}),
			},
			Effects = {
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"JoseFamilyBanter",
					},
					searchInMap = true,
					searchInMarker = false,
				}),
			},
			Once = true,
			ParamId = "TCE_BanterSecondConvo",
			QuestId = "JoseFamily",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsAware', {
					TargetUnit = "JoseFamily_All",
				}),
			},
			Effects = {
				PlaceObj('GroupSetSide', {
					Side = "enemy1",
					TargetUnit = "JoseFamily_All",
				}),
			},
			Once = true,
			ParamId = "TCE_BastienFought",
			QuestId = "JoseFamily",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "BastienMet",
		}),
		PlaceObj('QuestVarBool', {
			Name = "RunAway",
		}),
		PlaceObj('QuestVarBool', {
			Name = "DropWeapons",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BaconDiamonds",
		}),
		PlaceObj('QuestVarBool', {
			Name = "LeadFamily",
		}),
		PlaceObj('QuestVarBool', {
			Name = "JoseKilled",
		}),
		PlaceObj('QuestVarBool', {
			Name = "StartCombat",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Scared",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Scared2",
		}),
		PlaceObj('QuestVarBool', {
			Name = "UnderSuspicion",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MentionedMajor",
		}),
		PlaceObj('QuestVarBool', {
			Name = "LeadMajor",
		}),
		PlaceObj('QuestVarBool', {
			Name = "JoseBanished",
		}),
		PlaceObj('QuestVarBool', {
			Name = "JoseKilledInFortress",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_StartSecondConvo",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BanterSecondConvo",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "DiamondsRunAway",
		}),
		PlaceObj('QuestVarBool', {
			Name = "JoseRustConversationDone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BastienFought",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BastienMetRefugeeCamp",
		}),
	},
	group = "Ernie",
	id = "JoseFamily",
})

