-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Radomir",
	Chapter = "Act1",
	DisplayName = T(970189978312, --[[QuestsDef PiratesGold DisplayName]] "Pirate gold"),
	KillTCEsConditions = {
		PlaceObj('QuestKillTCEsOnCompleted', {}),
	},
	NoteDefs = {
		LastNoteIdx = 12,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Pastor",
					Sector = "H8",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "PiratesGold",
							Vars = set( "Given", "MapFound" ),
							__eval = function ()
								local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
								return quest.Given or quest.MapFound
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set( "PastorDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.PastorDead
							end,
						}),
					},
				}),
			},
			Scouting = true,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set({
	Given = false,
	MapFound = false,
}),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return not quest.Given and not quest.MapFound
					end,
				}),
			},
			Text = T(440712414242, --[[QuestsDef PiratesGold Text]] "A <em>restless spirit</em> is bothering the <em>Pastor</em> in <em><SectorName('H8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "H8",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "PiratesGold",
							Vars = set( "MapFound" ),
							__eval = function ()
								local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
								return quest.MapFound
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set( "PastorDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.PastorDead
							end,
						}),
					},
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PiratesGold",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.Given
					end,
				}),
			},
			Text = T(540233707501, --[[QuestsDef PiratesGold Text]] "A <em>restless spirit</em> is bothering the <em>Pastor</em> in <em><SectorName('H8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "I10",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PiratesGold",
					Vars = set( "WritingsFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.WritingsFound
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "MapFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.MapFound
					end,
				}),
			},
			Idx = 2,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "OutsiderLocation" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.OutsiderLocation
					end,
				}),
			},
			Text = T(953336285818, --[[QuestsDef PiratesGold Text]] 'The "restless spirit" is hiding on the <em><SectorName(\'I10\')></em> across Rimville'),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "I10",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PiratesGold",
					Vars = set( "MapFound", "SpawnPirate1", "SpawnPirate2", "SpawnPirate3" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.MapFound or quest.SpawnPirate1 or quest.SpawnPirate2 or quest.SpawnPirate3
					end,
				}),
			},
			Idx = 3,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PiratesGold",
					Vars = set( "WritingsFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.WritingsFound
					end,
				}),
			},
			Text = T(755044552537, --[[QuestsDef PiratesGold Text]] '<em>Intel:</em> The "restless spirit" can be ambushed by <em>splitting up</em> and guarding the roads in sector <em><SectorName(\'I10\')></em> (press <em><ShortcutButton(\'actionCamOverview\')></em> to toggle <em>Overview</em> mode)'),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "MapFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.MapFound
					end,
				}),
			},
			Idx = 9,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "TCE_MercsIn3Areas" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.TCE_MercsIn3Areas
					end,
				}),
			},
			Text = T(778158864740, --[[QuestsDef PiratesGold Text]] "Time to do some <em>ghost busting</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "H8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PiratesGold",
					Vars = set( "GoldFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.GoldFound
					end,
				}),
			},
			Idx = 5,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "PiratesGold",
					Vars = set( "MapFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.MapFound
					end,
				}),
			},
			Text = T(616099145115, --[[QuestsDef PiratesGold Text]] "There is a <em>treasure</em> hidden in the walls of the <em>Church</em> in <em><SectorName('H8')></em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "GoldFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.GoldFound
					end,
				}),
			},
			Idx = 10,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "GoldFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.GoldFound
					end,
				}),
			},
			Text = T(372687949756, --[[QuestsDef PiratesGold Text]] "<em>Outcome:</em> Found the <em>treasure</em> in <em><SectorName('H8')></em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "GoldFound", "TreasureDonated" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.GoldFound and quest.TreasureDonated
					end,
				}),
			},
			Idx = 11,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "GoldFound", "TreasureDonated" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.GoldFound and quest.TreasureDonated
					end,
				}),
			},
			Text = T(980235817279, --[[QuestsDef PiratesGold Text]] "<em>Outcome:</em> Donated the <em>treasure</em> in <em><SectorName('H8')></em> to the House of Blessed Spirits"),
		}),
	},
	QuestGroup = "Savanah",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsAware', {
					TargetUnit = "PiratesGold_Thugs",
				}),
			},
			Effects = {
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"PiratesGold_FightThugs",
					},
					searchInMap = true,
					searchInMarker = false,
				}),
				PlaceObj('EffectsWithCondition', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PiratesGold",
							Vars = set( "NotStarted" ),
							__eval = function ()
								local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
								return quest.NotStarted
							end,
						}),
					},
					Effects = {
						PlaceObj('QuestSetVariableBool', {
							Prop = "Given",
							QuestId = "PiratesGold",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_ThugsFightStarted",
			QuestId = "PiratesGold",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "MercInArea1", "MercInArea2", "MercInArea3" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.MercInArea1 and quest.MercInArea2 and quest.MercInArea3
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "WritingsFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.WritingsFound
					end,
				}),
			},
			Effects = {
				PlaceObj('EffectsWithCondition', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 1,
							Condition = "==",
							Prop = "Randomizer",
							QuestId = "PiratesGold",
						}),
					},
					Effects = {
						PlaceObj('QuestSetVariableBool', {
							Prop = "SpawnPirate1",
							QuestId = "PiratesGold",
						}),
					},
					EffectsElse = {
						PlaceObj('EffectsWithCondition', {
							Conditions = {
								PlaceObj('QuestIsVariableNum', {
									Amount = 2,
									Condition = "==",
									Prop = "Randomizer",
									QuestId = "PiratesGold",
								}),
							},
							Effects = {
								PlaceObj('QuestSetVariableBool', {
									Prop = "SpawnPirate2",
									QuestId = "PiratesGold",
								}),
							},
							EffectsElse = {
								PlaceObj('QuestSetVariableBool', {
									Prop = "SpawnPirate3",
									QuestId = "PiratesGold",
								}),
							},
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_MercsIn3Areas",
			QuestId = "PiratesGold",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsOnMap', {
					TargetUnit = "Weirdo",
				}),
			},
			Effects = {
				PlaceObj('GroupAlert', {
					TargetUnit = "Weirdo",
				}),
			},
			Once = true,
			ParamId = "TCE_WeirdoSpawned",
			QuestId = "PiratesGold",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('ItemIsFound', {
					ItemId = "WeirdosMap",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "MapFound",
					QuestId = "PiratesGold",
				}),
				PlaceObj('GrantExperienceSector', {
					logImportant = true,
				}),
			},
			Once = true,
			ParamId = "TCE_WeirdoKilled",
			QuestId = "PiratesGold",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "PiratesGold",
					Vars = set( "GoldFound", "MapFound" ),
					__eval = function ()
						local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
						return quest.GoldFound and quest.MapFound
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H8",
					},
				}),
			},
			Effects = {
				PlaceObj('GrantExperienceSector', {
					logImportant = true,
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set({
	PastorDead = false,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.PastorDead
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PiratesGold",
							Vars = set({
	TreasureDonated = false,
}),
							__eval = function ()
								local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
								return not quest.TreasureDonated
							end,
						}),
					},
					'Effects', {
						PlaceObj('UnitStartConversation', {
							Conversation = "Pastor_1",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_GoldFound",
			QuestId = "PiratesGold",
			requiredSectors = {
				"H8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('UnitHasInteraction', {
							'TargetUnit', "any merc",
							'DisableContextModification', true,
							'CombatAction', "Interact_LootContainer",
							'Group', "PiratesGold_TreasureStash",
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "PiratesGold",
							Vars = set( "TreasureDonated" ),
							__eval = function ()
								local quest = gv_Quests['PiratesGold'] or QuestGetState('PiratesGold')
								return quest.TreasureDonated
							end,
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('UnitTakeItem', {
					AnySquad = true,
					ItemId = "WeirdosMap",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Completed",
					QuestId = "PiratesGold",
				}),
			},
			Once = true,
			ParamId = "TCE_Complete",
			QuestId = "PiratesGold",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "OutsiderLocation",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ThugsFightStarted",
		}),
		PlaceObj('QuestVarBool', {
			Name = "WritingsFound",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MercInArea1",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MercInArea2",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MercInArea3",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MercsIn3Areas",
		}),
		PlaceObj('QuestVarNum', {
			Name = "Randomizer",
			RandomRangeMax = 3,
			Value = 1,
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnPirate1",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnPirate2",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnPirate3",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_WeirdoSpawned",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_WeirdoKilled",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MapFound",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_GoldFound",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Complete",
		}),
		PlaceObj('QuestVarBool', {
			Name = "GoldFound",
		}),
		PlaceObj('QuestVarBool', {
			Name = "TreasureDonated",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
	},
	group = "Fleatown",
	id = "PiratesGold",
})

