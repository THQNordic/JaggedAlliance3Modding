-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Radomir",
	Chapter = "Act1",
	DevNotes = "BossCombat indicated that you started combat with the Boss while Smiley was alive (see _GroupsAttacked).\n\nRemoved in TCE_MollieDead_Reaction the Boss turning hostile when Mollie is dead (r 0221622). We shouldn't do that without a banter/conv greeting and in any case we need to fail the quest, flip the remaining guards to enemy1 and adjust the Notes.",
	DisplayName = T(118904227644, --[[QuestsDef Smiley DisplayName]] "M.E.R.C.: Finding Smiley"),
	NoteDefs = {
		LastNoteIdx = 52,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Maman",
					Sector = "D7",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Given_Maman", "Given_Shaman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given_Maman or quest.Given_Shaman
					end,
				}),
			},
			Idx = 31,
			Scouting = true,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	Given = false,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.Given
					end,
				}),
			},
			Text = T(853298817456, --[[QuestsDef Smiley Text]] "A girl has been kidnapped from the local brothel in the <em><SectorName('D7')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Maman",
					Sector = "D7",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Given_Maman", "Given_Shaman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given_Maman or quest.Given_Shaman
					end,
				}),
			},
			Idx = 33,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	Given = false,
	Lead_Rumor = true,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.Given and quest.Lead_Rumor
					end,
				}),
			},
			Text = T(853298817456, --[[QuestsDef Smiley Text]] "A girl has been kidnapped from the local brothel in the <em><SectorName('D7')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Shaman",
					Sector = "E9",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "04_Betrayal",
							Vars = set( "Given" ),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return quest.Given
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "Given_Shaman", "Lead_Shaman" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.Given_Shaman or quest.Lead_Shaman
							end,
						}),
					},
				}),
			},
			Idx = 32,
			Scouting = true,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	Given = false,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.Given
					end,
				}),
			},
			Text = T(322589215542, --[[QuestsDef Smiley Text]] "A <em>M.E.R.C.</em> operative was spotted talking to the local Shaman in the <em><SectorName('E9')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "D7",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "MollieMet", "Pastor_Key", "SmileyDead", "SmileyMet" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.MollieMet or quest.Pastor_Key or quest.SmileyDead or quest.SmileyMet
							end,
						}),
					},
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	Given_Maman = true,
	Given_Shaman = false,
	SmileyDead = false,
	SmileyMet = false,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given_Maman and not quest.Given_Shaman and not quest.SmileyDead and not quest.SmileyMet
					end,
				}),
			},
			Text = T(393961507139, --[[QuestsDef Smiley Text]] "<em>Mollie</em> was kidnapped by <em>Smiley</em> from the <em><SectorName('D7')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "D7",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Given_Maman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given_Maman
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Completed", "Failed", "SmileyDead", "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Completed or quest.Failed or quest.SmileyDead or quest.SmileyMet
					end,
				}),
			},
			Idx = 4,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Given_Shaman", "Lead_Broker", "MollieMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given_Shaman or quest.Lead_Broker or quest.MollieMet
					end,
				}),
			},
			Text = T(569171936992, --[[QuestsDef Smiley Text]] "<em>Smiley</em> ran away with a girl from <em>Le Lys Rouge</em> in the <em><SectorName('D7')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "InvestigateCrimeScene_IntelMarker",
					Sector = "D7",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "Pastor_Key", "SmileyDead", "SmileyMet" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.Pastor_Key or quest.SmileyDead or quest.SmileyMet
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set( "CrimeSceneChecked" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.CrimeSceneChecked
							end,
						}),
					},
				}),
			},
			Idx = 16,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "InvestigateCrimeScene" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.InvestigateCrimeScene
					end,
				}),
			},
			Text = T(171307235503, --[[QuestsDef Smiley Text]] "There may be clues of Mollie's disappearing in the back rooms of <em>Le Lys Rouge</em> in <em><SectorName('D7')></em> (press <em><ShortcutButton('actionCamOverview')></em> to toggle <em>Overview</em> mode)"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "E7",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "Completed", "Failed", "LoveNestChecked", "SmileyDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.Completed or quest.Failed or quest.LoveNestChecked or quest.SmileyDead
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
					},
				}),
			},
			Idx = 27,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Maman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Maman
					end,
				}),
			},
			Text = T(544977641011, --[[QuestsDef Smiley Text]] "There may be clues about <em>Smiley</em> in the <em><SectorName('E7')></em> south of <em><SectorName('D7')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Shaman",
					Sector = "E9",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "Completed", "Failed", "Lead_Shaman", "SmileyDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.Completed or quest.Failed or quest.Lead_Shaman or quest.SmileyDead
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "04_Betrayal",
							Vars = set( "Given" ),
							__eval = function ()
								local quest = gv_Quests['04_Betrayal'] or QuestGetState('04_Betrayal')
								return quest.Given
							end,
						}),
					},
				}),
			},
			Idx = 10,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Lead_Maman", "LoveNestChecked" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Maman or quest.LoveNestChecked
					end,
				}),
			},
			Text = T(640994532046, --[[QuestsDef Smiley Text]] "There may be clues about <em>Smiley</em> in the <em><SectorName('E9')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Broker",
					Sector = "H9",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "Completed", "Failed", "Lead_Broker", "Pastor_Key", "SmileyDead", "SmileyMet" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.Completed or quest.Failed or quest.Lead_Broker or quest.Pastor_Key or quest.SmileyDead or quest.SmileyMet
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
						PlaceObj('GroupIsDead', {
							Group = "Broker",
						}),
					},
				}),
			},
			Idx = 28,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Lead_Pastor", "Lead_Shaman", "LoveNestChecked", "MollieMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Pastor or quest.Lead_Shaman or quest.LoveNestChecked or quest.MollieMet
					end,
				}),
			},
			Text = T(851126333320, --[[QuestsDef Smiley Text]] "There may be clues about <em>Smiley</em> in <em><SectorName('H9')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Mollie",
					Sector = "I9",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "MollieMet", "Mollie_return", "Mollie_stay" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieMet or quest.Mollie_return or quest.Mollie_stay
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "MollieDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead
					end,
				}),
			},
			Idx = 6,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Lead_Broker", "MollieMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Broker or quest.MollieMet
					end,
				}),
			},
			Text = T(921933334272, --[[QuestsDef Smiley Text]] "<em>Mollie</em> is in <em><SectorName('I9')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "CrimeSceneChecked" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.CrimeSceneChecked
					end,
				}),
			},
			Idx = 39,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "CrimeSceneChecked" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.CrimeSceneChecked
					end,
				}),
			},
			Text = T(445547244320, --[[QuestsDef Smiley Text]] "Clue: <em>Mollie</em> left the brothel willingly with <em>Smiley</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Shaman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Shaman
					end,
				}),
			},
			Idx = 44,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Shaman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Shaman
					end,
				}),
			},
			Text = T(686259151918, --[[QuestsDef Smiley Text]] "Clue: <em>Smiley</em> and <em>Mollie</em> wanted to be married by <em>Sangoma</em>, but he refused"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Broker" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Broker
					end,
				}),
			},
			Idx = 45,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Broker" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Broker
					end,
				}),
			},
			Text = T(494203538613, --[[QuestsDef Smiley Text]] "Clue: <em>Smiley</em> killed one of the goons of <em>Boss Blaubert</em>, but the Boss stopped them from killing him"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Mollie" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Mollie
					end,
				}),
			},
			Idx = 47,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Lead_Mollie" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Mollie
					end,
				}),
			},
			Text = T(895910537650, --[[QuestsDef Smiley Text]] "Clue: <em>Mollie</em> mentioned that a <em>holy man</em> was hiding <em>Smiley</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Lead_Broker", "Lead_Pastor" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Broker or quest.Lead_Pastor
					end,
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "SmileyDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.SmileyDead
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
					},
				}),
			},
			Idx = 42,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Lead_Broker", "Lead_Pastor" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Lead_Broker or quest.Lead_Pastor
					end,
				}),
			},
			Text = T(737699483359, --[[QuestsDef Smiley Text]] "Clue: <em>Father Tooker</em> in <em><SectorName('H8')></em> hides something about Smiley"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "LoveNestChecked" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.LoveNestChecked
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Given", "Given_Maman", "Given_Shaman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given or quest.Given_Maman or quest.Given_Shaman
					end,
				}),
			},
			Idx = 48,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "LoveNestChecked" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.LoveNestChecked
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Given", "Given_Maman", "Given_Shaman" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Given or quest.Given_Maman or quest.Given_Shaman
					end,
				}),
			},
			Text = T(130862710845, --[[QuestsDef Smiley Text]] "Clue: <em>Smiley</em> and <em>Mollie</em> spent some quality time in the savanna"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableNum', {
					Amount = 3,
					Prop = "Clues",
					QuestId = "Smiley",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Pastor_Key", "SmileyDead", "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Pastor_Key or quest.SmileyDead or quest.SmileyMet
					end,
				}),
			},
			Idx = 52,
			ShowConditions = {
				PlaceObj('QuestIsVariableNum', {
					Amount = 2,
					Prop = "Clues",
					QuestId = "Smiley",
				}),
			},
			Text = T(582801098933, --[[QuestsDef Smiley Text]] "<em>Smiley</em> is hiding somewhere close and probably needs help"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Pastor",
					Sector = "H8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Pastor_Key", "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Pastor_Key or quest.SmileyMet
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "PastorDead", "SmileyDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.PastorDead or quest.SmileyDead
					end,
				}),
			},
			Idx = 20,
			ShowConditions = {
				PlaceObj('QuestIsVariableNum', {
					Amount = 3,
					Prop = "Clues",
					QuestId = "Smiley",
				}),
			},
			Text = T(796805228235, --[[QuestsDef Smiley Text]] "<em>Father Tooker</em> in <em><SectorName('H8')></em> knows where Smiley is"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "SmileyNPC",
					Sector = "H8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyDead", "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyDead or quest.SmileyMet
					end,
				}),
			},
			Idx = 12,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Pastor_Key" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Pastor_Key
					end,
				}),
			},
			Text = T(121938259793, --[[QuestsDef Smiley Text]] "<em>Smiley</em> is in the back room of the church"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "SmileyNPC",
					Sector = "H8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyMet
					end,
				}),
			},
			Idx = 41,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyMet
					end,
				}),
			},
			Text = T(127577927633, --[[QuestsDef Smiley Text]] "Discovered <em>Smiley</em> in the church in <em><SectorName('H8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "H8",
				}),
			},
			HideConditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set( "Completed", "Failed", "SmileyDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.Completed or quest.Failed or quest.SmileyDead
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set( "ChurchFightDone" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.ChurchFightDone
							end,
						}),
					},
				}),
			},
			Idx = 7,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyMet" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyMet
					end,
				}),
			},
			Text = T(674286120561, --[[QuestsDef Smiley Text]] "A band of <em><SectorName('H8')></em> thugs is attacking the Church looking for <em>Smiley</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "PastorBlamed" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.PastorBlamed
					end,
				}),
			},
			Idx = 50,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "PastorBlamed" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.PastorBlamed
					end,
				}),
			},
			Text = T(205771180342, --[[QuestsDef Smiley Text]] "<em>Father Tooker</em> made a deal with <em>Boss Blaubert</em> to save the life of <em>Smiley</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Mollie",
					Sector = "I9",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Mollie_return", "Mollie_stay" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Mollie_return or quest.Mollie_stay
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "MollieDead", "SmileyDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead or quest.SmileyDead
					end,
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "LaBouePartDone" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.LaBouePartDone
					end,
				}),
			},
			Text = T(866937879011, --[[QuestsDef Smiley Text]] "<em>Smiley</em> will try to rescue <em>Mollie</em> from the house of <em>Boss Blaubert</em> in <em><SectorName('I9')></em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "SmileyDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyDead
					end,
				}),
			},
			Idx = 17,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyDead
					end,
				}),
			},
			Text = T(299283452023, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Smiley</em> is dead"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Smiley_join" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Smiley_join
					end,
				}),
			},
			Idx = 49,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Smiley_join" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Smiley_join
					end,
				}),
			},
			Text = T(817299618326, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> Recruited <em>Smiley</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Smiley_leave" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Smiley_leave
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyDead
					end,
				}),
			},
			Idx = 43,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Smiley_leave" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Smiley_leave
					end,
				}),
			},
			Text = T(570892083017, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Smiley</em> returned to Arulco"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "MollieDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead
					end,
				}),
			},
			Idx = 35,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "MollieDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead
					end,
				}),
			},
			Text = T(250856006557, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Mollie</em> is dead"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Mollie_stay" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Mollie_stay
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "MollieDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead
					end,
				}),
			},
			Idx = 37,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Mollie_stay" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Mollie_stay
					end,
				}),
			},
			Text = T(249134887266, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Mollie</em> will stay with <em>Boss Blaubert</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "Mollie_return" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Mollie_return
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "MollieDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead
					end,
				}),
			},
			Idx = 38,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "Mollie_return" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Mollie_return
					end,
				}),
			},
			Text = T(697321516875, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Mollie</em> went back to <em>Le Lys Rouge</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "KillPastor" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.KillPastor
					end,
				}),
			},
			Idx = 34,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "KillPastor" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.KillPastor
					end,
				}),
			},
			Text = T(616397577451, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Smiley</em> has killed <em>Father Tooker</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	KillPastor = false,
	PastorDead = true,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.KillPastor and quest.PastorDead
					end,
				}),
			},
			Idx = 51,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	KillPastor = false,
	PastorDead = true,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.KillPastor and quest.PastorDead
					end,
				}),
			},
			Text = T(355550736346, --[[QuestsDef Smiley Text]] "<em>Outcome:</em> <em>Father Tooker</em> is dead"),
		}),
	},
	QuestGroup = "Other",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableNum', {
					Amount = 3,
					Prop = "CrimeSceneClues",
					QuestId = "Smiley",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "CrimeSceneChecked",
					QuestId = "Smiley",
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Condition = "<",
							Prop = "Clues",
							QuestId = "Smiley",
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableNum', {
							Amount = 1,
							Prop = "Clues",
							QuestId = "Smiley",
						}),
						PlaceObj('LogMessageAdd', {
							message = T(590739592268, --[[QuestsDef Smiley message]] "Gained a <em>clue</em> about <em>Smiley</em>"),
						}),
					},
				}),
				PlaceObj('GrantExperienceSector', {}),
			},
			Once = true,
			ParamId = "TCE_CrimeSceneDone",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						Pastor_Key = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Pastor_Key
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H8",
					},
				}),
			},
			Effects = {
				PlaceObj('GroupRemoveStatusEffect', {
					Status = "HiddenNPC",
					TargetUnit = "SmileyNPC",
				}),
				PlaceObj('LockpickableSetState', {
					Group = "SmileyDoor",
					State = "unlocked",
				}),
				PlaceObj('CustomCodeEffect', {
					custom_code = 'for _, o in ipairs(Groups["SmileyDoor"]) do	if o:IsKindOf("Lockpickable") then		o:SetState("open")	end end',
				}),
			},
			Once = true,
			ParamId = "TCE_UnlockDoor",
			QuestId = "Smiley",
			requiredSectors = {
				"H8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						MollieDead = false,
						SmileyMet = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.MollieDead and quest.SmileyMet
					end,
				}),
			},
			Effects = {
				PlaceObj('SectorEnterConflict', {
					disable_travel = true,
					lock_conflict = true,
					sector_id = "H8",
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = {
								PastorDead = false,
							},
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.PastorDead
							end,
						}),
					},
					'Effects', {
						PlaceObj('PlaySetpiece', {
							setpiece = "SmileyChurchFight",
						}),
						PlaceObj('QuestSetVariableBool', {
							Prop = "PastorBlamed",
							QuestId = "Smiley",
						}),
					},
					'EffectsElse', {
						PlaceObj('PlaySetpiece', {
							setpiece = "SmileyChurchFight_noPastor",
						}),
					},
				}),
				PlaceObj('GroupSetSide', {
					Side = "ally",
					TargetUnit = "SmileyNPC",
				}),
				PlaceObj('StartDeploymentInCurrentSector', {
					WaitClicked = true,
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "SmileyThugs",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "SmileyNPC",
				}),
			},
			Once = true,
			ParamId = "TCE_StartChurchCombat",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('GroupIsDead', {
					Group = "SmileyThugs",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "ChurchFightDone",
					QuestId = "Smiley",
				}),
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Medium",
					logImportant = true,
				}),
			},
			Once = true,
			ParamId = "TCE_PostChurchFight",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						ChurchFightDone = true,
						KillPastor = false,
						LaBouePartDone = false,
						PastorDead = false,
						SmileyDead = false,
						SmileyReadyToExitLaBoue = false,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.ChurchFightDone and not quest.KillPastor and not quest.LaBouePartDone and not quest.PastorDead and not quest.SmileyDead and not quest.SmileyReadyToExitLaBoue
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H8",
					},
				}),
			},
			Effects = {
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"Fleatown_Smiley_01_LaBoue",
					},
					banterSequentialWaitFor = "BanterLineStart",
					searchInMap = true,
					searchInMarker = false,
				}),
				PlaceObj('GroupSetBehaviorPatrol', {
					MarkerGroup = "SmileyToPastor",
					TargetUnit = "SmileyNPC",
					UseWeapons = true,
				}),
				PlaceObj('GroupSetBehaviorPatrol', {
					MarkerGroup = "PastorToPodium",
					TargetUnit = "Pastor",
				}),
				PlaceObj('SleepEffect', {
					Sleep = 6000,
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = {
								ChurchFightDone = true,
								KillPastor = false,
								LaBouePartDone = false,
								PastorDead = false,
								SmileyDead = false,
								SmileyReadyToExitLaBoue = false,
							},
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.ChurchFightDone and not quest.KillPastor and not quest.LaBouePartDone and not quest.PastorDead and not quest.SmileyDead and not quest.SmileyReadyToExitLaBoue
							end,
						}),
					},
					'Effects', {
						PlaceObj('UnitStartConversation', {
							Conversation = "Smiley_1b",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_ConfrontPastor",
			QuestId = "Smiley",
			requiredSectors = {
				"H8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = {
						KillPastor = true,
						PastorDead = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.KillPastor or quest.PastorDead
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						ChurchFightDone = true,
						LaBouePartDone = false,
						SmileyDead = false,
						SmileyMet = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.ChurchFightDone and not quest.LaBouePartDone and not quest.SmileyDead and quest.SmileyMet
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H8",
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "LaBouePartDone",
					QuestId = "Smiley",
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = {
								KillPastor = true,
							},
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.KillPastor
							end,
						}),
					},
					'Effects', {
						PlaceObj('PlaySetpiece', {
							setpiece = "SmileyKillsPastor",
						}),
						PlaceObj('QuestSetVariableBool', {
							Prop = "PastorDead",
							QuestId = "Smiley",
						}),
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"Fleatown_Smiley_01_PastorKilled",
							},
							banterSequentialWaitFor = "BanterLineDone",
							searchInMap = true,
							searchInMarker = false,
						}),
					},
					'EffectsElse', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"Fleatown_Smiley_02_PastorDead",
							},
							banterSequentialWaitFor = "BanterLineDone",
							searchInMap = true,
							searchInMarker = false,
						}),
					},
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "SmileyReadyToExitLaBoue",
					QuestId = "Smiley",
				}),
			},
			Once = true,
			ParamId = "TCE_KillPastor",
			QuestId = "Smiley",
			requiredSectors = {
				"H8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"RimvilleApproach_Mollie_AfterSm_SmileyDead",
						"RimvilleApproach_Mollie_AfterSm_SmileyLeft",
						"RimvilleApproach_Mollie_BeforeSm_BossDead",
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "MollieMet",
					QuestId = "Smiley",
				}),
			},
			Once = true,
			ParamId = "TCE_MollieMet",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Smiley",
					Vars = set( "SmileyDead", "SmileyReadyToExitLaBoue" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.SmileyDead or quest.SmileyReadyToExitLaBoue
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H8",
					},
				}),
			},
			Effects = {
				PlaceObj('SectorEnterConflict', {
					conflict_mode = false,
					sector_id = "H8",
				}),
			},
			Once = true,
			ParamId = "TCE_RemoveConflictLaBoue",
			QuestId = "Smiley",
			requiredSectors = {
				"H8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	SmileyDead = false,
	SmileyReadyToExitLaBoue = true,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.SmileyDead and quest.SmileyReadyToExitLaBoue
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H8",
					},
				}),
			},
			Effects = {
				PlaceObj('GroupSetBehaviorExit', {
					MarkerGroup = "North",
					Running = true,
					TargetUnit = "SmileyNPC",
					UseWeapons = true,
				}),
			},
			Once = true,
			ParamId = "TCE_SmileyExitLaBoue",
			QuestId = "Smiley",
			requiredSectors = {
				"H8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I9",
					},
				}),
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 15,
					SecondTargetUnit = "SmileyNPC",
					TargetUnit = "any merc",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	BossCombat = false,
	Completed = false,
	Failed = false,
	MollieDead = false,
	Mollie_return = false,
	Mollie_stay = false,
	SmileyDead = false,
	Smiley_EndChoice = false,
	Smiley_join = false,
	Smiley_leave = false,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.BossCombat and not quest.Completed and not quest.Failed and not quest.MollieDead and not quest.Mollie_return and not quest.Mollie_stay and not quest.SmileyDead and not quest.Smiley_EndChoice and not quest.Smiley_join and not quest.Smiley_leave
					end,
				}),
				PlaceObj('CombatIsActive', {
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set({
	BossDead = false,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.BossDead
							end,
						}),
					},
					'Effects', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"RimvilleApproach_Smiley_BossAlive",
							},
							banterSequentialWaitFor = "BanterStart",
							searchInMap = true,
							searchInMarker = false,
						}),
					},
					'EffectsElse', {
						PlaceObj('PlayBanterEffect', {
							Banters = {
								"RimvilleApproach_Smiley_BossDead",
							},
							banterSequentialWaitFor = "BanterStart",
							searchInMap = true,
							searchInMarker = false,
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_SmileyTriggerBanter",
			QuestId = "Smiley",
			requiredSectors = {
				"I9",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I9",
					},
				}),
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 15,
					SecondTargetUnit = "SmileyNPC",
					TargetUnit = "any merc",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set({
	BossCombat = false,
	Completed = false,
	Failed = false,
	MollieDead = false,
	Mollie_return = false,
	Mollie_stay = false,
	SmileyDead = false,
	Smiley_EndChoice = false,
	Smiley_join = false,
	Smiley_leave = false,
}),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return not quest.BossCombat and not quest.Completed and not quest.Failed and not quest.MollieDead and not quest.Mollie_return and not quest.Mollie_stay and not quest.SmileyDead and not quest.Smiley_EndChoice and not quest.Smiley_join and not quest.Smiley_leave
					end,
				}),
				PlaceObj('CombatIsActive', {
					Negate = true,
				}),
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"RimvilleApproach_Smiley_BossAlive",
						"RimvilleApproach_Smiley_BossDead",
					},
					WaitOver = true,
				}),
			},
			Effects = {
				PlaceObj('UnitStartConversation', {
					Conversation = "Smiley_2",
				}),
			},
			Once = true,
			ParamId = "TCE_SmileyTriggerConversation",
			QuestId = "Smiley",
			requiredSectors = {
				"I9",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						BossCombat = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.BossCombat
					end,
				}),
			},
			Effects = {
				PlaceObj('GroupSetSide', {
					Side = "enemy1",
					TargetUnit = "FleatownBoss",
				}),
				PlaceObj('GroupSetSide', {
					Side = "enemy1",
					TargetUnit = "RimvilleGuardsAll",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "FleatownBoss",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "SmileyNPC",
				}),
			},
			Once = true,
			ParamId = "TCE_BossStartFight",
			QuestId = "Smiley",
			SequentialEffects = false,
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						Mollie_return = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Mollie_return
					end,
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('CityGrantLoyalty', {
					Amount = 20,
					City = "Pantagruel",
					SpecialConversationMessage = T(908752592269, --[[QuestsDef Smiley SpecialConversationMessage]] "<em>Mollie</em> has gone home"),
				}),
				PlaceObj('SectorSetRAndROperation', {
					enable = false,
					sector_id = "I9",
				}),
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Large",
					logImportant = true,
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set({
	Completed = false,
	Failed = false,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.Completed and not quest.Failed
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "Completed",
							QuestId = "Smiley",
						}),
					},
				}),
				PlaceObj('GroupSetBehaviorExit', {
					Running = true,
					TargetUnit = "Mollie",
					closest = true,
				}),
			},
			Once = true,
			ParamId = "TCE_MollieLeave",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						Smiley_leave = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.Smiley_leave
					end,
				}),
			},
			Effects = {
				PlaceObj('EffectsWithCondition', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = {
								BossDead = false,
								Mollie_stay = true,
							},
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.BossDead and quest.Mollie_stay
							end,
						}),
					},
					Effects = {
						PlaceObj('CityGrantLoyalty', {
							Amount = 20,
							City = "Fleatown",
							SpecialConversationMessage = T(911412322910, --[[QuestsDef Smiley SpecialConversationMessage]] "<em>Mollie</em> remained with Boss Blaubert"),
						}),
						PlaceObj('QuestSetVariableBool', {
							Prop = "BossInvited",
							QuestId = "Luigi",
						}),
						PlaceObj('SectorSetSide', {
							disable_sticky = true,
							sector_id = "I9",
						}),
						PlaceObj('SectorSetRAndROperation', {
							sector_id = "I9",
						}),
						PlaceObj('GrantExperienceSector', {
							Amount = "XPQuestReward_Large",
							logImportant = true,
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"I9",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set({
	Failed = false,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.Failed
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "Completed",
							QuestId = "Smiley",
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"H8",
							},
						}),
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set( "MollieDead" ),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.MollieDead
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "Failed",
							QuestId = "Smiley",
						}),
					},
				}),
				PlaceObj('GroupSetBehaviorExit', {
					Running = true,
					TargetUnit = "SmileyNPC",
					UseWeapons = true,
					closest = true,
				}),
			},
			Once = true,
			ParamId = "TCE_SmileyLeave",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = {
						LaBouePartDone = true,
						MollieDead = false,
						Mollie_return = false,
						SmileyDead = true,
					},
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.LaBouePartDone and not quest.MollieDead and not quest.Mollie_return and quest.SmileyDead
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I9",
					},
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ApplyGuiltyOrRighteous', {
					effectType = "negative",
				}),
				PlaceObj('UnitStartConversation', {
					Conversation = "Mollie_1",
				}),
			},
			Once = true,
			ParamId = "TCE_SmileyDead_Reaction",
			QuestId = "Smiley",
			requiredSectors = {
				"I9",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "MollieDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.MollieDead
					end,
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = {
								LaBouePartDone = true,
								SmileyDead = false,
								Smiley_leave = false,
							},
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.LaBouePartDone and not quest.SmileyDead and not quest.Smiley_leave
							end,
						}),
						PlaceObj('UnitIsOnMap', {
							TargetUnit = "Smiley",
						}),
					},
					'Effects', {
						PlaceObj('ApplyGuiltyOrRighteous', {
							effectType = "negative",
						}),
						PlaceObj('UnitStartConversation', {
							Conversation = "Smiley_2",
						}),
						PlaceObj('GroupSetSide', {
							CreateSquad = false,
							Side = "neutral",
							TargetUnit = "Smiley",
						}),
						PlaceObj('GroupSetBehaviorExit', {
							Running = true,
							TargetUnit = "Smiley",
							UseWeapons = true,
							closest = true,
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = {
								LaBouePartDone = true,
								SmileyDead = false,
								Smiley_leave = false,
							},
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.LaBouePartDone and not quest.SmileyDead and not quest.Smiley_leave
							end,
						}),
						PlaceObj('UnitIsOnMap', {
							TargetUnit = "SmileyNPC",
						}),
						PlaceObj('PlayerIsInSectors', {
							Sectors = {
								"I9",
							},
						}),
					},
					'Effects', {
						PlaceObj('ApplyGuiltyOrRighteous', {
							effectType = "negative",
						}),
						PlaceObj('UnitStartConversation', {
							Conversation = "Smiley_2",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_MollieDead_Reaction",
			QuestId = "Smiley",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Smiley",
					Vars = set( "BossDead" ),
					__eval = function ()
						local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
						return quest.BossDead
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I9",
					},
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set({
	MollieDead = false,
	Mollie_return = false,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.MollieDead and not quest.Mollie_return
							end,
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "Smiley",
							Vars = set({
	LaBouePartDone = false,
	SmileyDead = true,
	Smiley_leave = true,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return not quest.LaBouePartDone or quest.SmileyDead or quest.Smiley_leave
							end,
						}),
					},
					'Effects', {
						PlaceObj('UnitStartConversation', {
							Conversation = "Mollie_1",
						}),
					},
					'EffectsElse', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "LuigiAndMollieDone",
							QuestId = "Luigi",
						}),
					},
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('QuestIsVariableBool', {
							QuestId = "Smiley",
							Vars = set({
	LaBouePartDone = true,
	MollieDead = false,
	SmileyDead = false,
	Smiley_leave = false,
}),
							__eval = function ()
								local quest = gv_Quests['Smiley'] or QuestGetState('Smiley')
								return quest.LaBouePartDone and not quest.MollieDead and not quest.SmileyDead and not quest.Smiley_leave
							end,
						}),
					},
					'Effects', {
						PlaceObj('QuestSetVariableBool', {
							Prop = "BossCombat",
							QuestId = "Smiley",
						}),
						PlaceObj('UnitStartConversation', {
							Conversation = "Smiley_2",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_BossDead_Reaction",
			QuestId = "Smiley",
			requiredSectors = {
				"I9",
			},
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "Given_Shaman",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ShamanMentionMaman",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given_Maman",
		}),
		PlaceObj('QuestVarNum', {
			Name = "Clues",
		}),
		PlaceObj('QuestVarBool', {
			Name = "InvestigateCrimeScene",
		}),
		PlaceObj('QuestVarBool', {
			Name = "CrimeSceneChecked",
		}),
		PlaceObj('QuestVarBool', {
			Name = "LoveNestChecked",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Lead_Rumor",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Lead_Maman",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Lead_Shaman",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Lead_Broker",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Lead_Pastor",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Lead_Mollie",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Pastor_Key",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SmileyMet",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ChurchFightDone",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MollieMet",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MollieBooboo",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SmileyDiscussMollie",
		}),
		PlaceObj('QuestVarBool', {
			Name = "KillPastor",
		}),
		PlaceObj('QuestVarBool', {
			Name = "LaBouePartDone",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SmileyReadyToExitLaBoue",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SmileyDead",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BossDead",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MollieDead",
		}),
		PlaceObj('QuestVarBool', {
			Name = "PastorBlamed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "PastorDead",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Smiley_EndChoice",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BossCombat",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Mollie_stay",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Mollie_return",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Smiley_leave",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Smiley_join",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_StartChurchCombat",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BossStartFight",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ConfrontPastor",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_KillPastor",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_UnlockDoor",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_PostChurchFight",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_RemoveConflictLaBoue",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SmileyExitLaBoue",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SmileyTriggerBanter",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SmileyTriggerConversation",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MollieMet",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SmileyLeave",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MollieLeave",
		}),
		PlaceObj('QuestVarNum', {
			Name = "CrimeSceneClues",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_CrimeSceneDone",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_SmileyDead_Reaction",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_MollieDead_Reaction",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BossDead_Reaction",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "BossRewardTaken",
		}),
	},
	group = "Global",
	id = "Smiley",
})

