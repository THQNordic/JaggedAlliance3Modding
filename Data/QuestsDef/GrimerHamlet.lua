-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	DevNotes = "Completed in Monday conversation or if he is dead and objectives are completed.\nFailed in custom code - see Grimer Hamlet Custom Logic.",
	DisplayName = T(992891289562, --[[QuestsDef GrimerHamlet DisplayName]] "Grimer Hamlet"),
	KillTCEsConditions = {
		PlaceObj('QuestIsVariableBool', {
			Condition = "or",
			QuestId = "GrimerHamlet",
			Vars = set( "Completed" ),
			__eval = function ()
				local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
				return quest.Completed
			end,
		}),
	},
	NoteDefs = {
		LastNoteIdx = 13,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Monday",
					Sector = "I19",
				}),
			},
			CompletionConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 1,
							Prop = "CiviliansSaved",
							QuestId = "GrimerHamlet",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GrimerHamlet",
							Vars = set( "Completed", "Failed", "Given", "InfectedUnleashed" ),
							__eval = function ()
								local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
								return quest.Completed or quest.Failed or quest.Given or quest.InfectedUnleashed
							end,
						}),
					},
				}),
			},
			ShowConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 1,
							Prop = "CiviliansSaved",
							QuestId = "GrimerHamlet",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GrimerHamlet",
							Vars = set( "BellaKilled", "GivenLead", "InfectedKilled", "InfectedUnleashed" ),
							__eval = function ()
								local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
								return quest.BellaKilled or quest.GivenLead or quest.InfectedKilled or quest.InfectedUnleashed
							end,
						}),
					},
				}),
			},
			Text = T(386442230802, --[[QuestsDef GrimerHamlet Text]] "There is a virulent disease outbreak in the <em><SectorName('I19')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "I19",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GrimerHamlet",
					Vars = set( "InfectedUnleashed", "PeopleSaved" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.InfectedUnleashed or quest.PeopleSaved
					end,
				}),
			},
			Idx = 2,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set({
	InfectedUnleashed = false,
	PeopleSaved = false,
}),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return not quest.InfectedUnleashed and not quest.PeopleSaved
					end,
				}),
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 1,
							Prop = "CiviliansSaved",
							QuestId = "GrimerHamlet",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GrimerHamlet",
							Vars = set( "Given" ),
							__eval = function ()
								local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
								return quest.Given
							end,
						}),
					},
				}),
			},
			Text = T(152065510351, --[[QuestsDef GrimerHamlet Text]] "There are still some <em>Infected</em> in the houses of <em><SectorName('I19')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Monday",
					Sector = "I19",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "PeopleSaved" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.PeopleSaved
					end,
				}),
			},
			Idx = 7,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "PeopleSaved" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.PeopleSaved
					end,
				}),
			},
			Text = T(680651474028, --[[QuestsDef GrimerHamlet Text]] "All trapped civilians in the <em><SectorName('I19')></em> have been <em>saved</em>"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GrimerHamlet",
					Vars = set( "Completed", "Failed", "InfectedUnleashedKilled" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.Completed or quest.Failed or quest.InfectedUnleashedKilled
					end,
				}),
			},
			Idx = 12,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "InfectedUnleashed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.InfectedUnleashed
					end,
				}),
				PlaceObj('SectorIsInConflict', {}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I19",
					},
				}),
			},
			Text = T(309366203978, --[[QuestsDef GrimerHamlet Text]] "The Infected in <em><SectorName('I19')></em> have all broken free!"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "GrimerLovers",
					Sector = "I19",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "BellaKilled" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.BellaKilled
					end,
				}),
			},
			Idx = 3,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "BellaQuest" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.BellaQuest
					end,
				}),
			},
			Text = T(542148393377, --[[QuestsDef GrimerHamlet Text]] "Monday from the <em><SectorName('I19')></em> wants his Infected ex-girlfriend <em>Bella</em> and her lovers killed"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "BellaKilled" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.BellaKilled
					end,
				}),
			},
			Idx = 9,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "BellaKilled" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.BellaKilled
					end,
				}),
			},
			Text = T(819361894763, --[[QuestsDef GrimerHamlet Text]] "<em>Bella</em> is dead"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Monday",
					Sector = "I19",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.Completed
					end,
				}),
			},
			Idx = 4,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "BellaKilled", "InfectedKilled", "InfectedUnleashedKilled", "PeopleSaved" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.BellaKilled and quest.InfectedKilled and quest.InfectedUnleashedKilled and quest.PeopleSaved
					end,
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
			},
			Text = T(934973815787, --[[QuestsDef GrimerHamlet Text]] "<em>Outcome:</em> There is finally some peace and quiet in <em><SectorName('I19')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Monday",
					Sector = "I19",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.Completed
					end,
				}),
			},
			HideConditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					per_ses_id = "NPC_Monday",
				}),
			},
			Idx = 11,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.Completed
					end,
				}),
			},
			Text = T(790238152791, --[[QuestsDef GrimerHamlet Text]] "<em>Outcome:</em> Time for <em>party</em> in the <em><SectorName('I19')></em>!"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "Failed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.Failed
					end,
				}),
			},
			Idx = 13,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "Failed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.Failed
					end,
				}),
			},
			Text = T(197781620297, --[[QuestsDef GrimerHamlet Text]] "<em>Outcome:</em> The outbreak in the <em><SectorName('I19')></em> got out of control"),
		}),
	},
	QuestGroup = "Farmlands",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('GroupIsDead', {
					Group = "InitialInfected",
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I19",
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "InfectedKilled",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Given",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Minor",
					logImportant = true,
				}),
			},
			Once = true,
			ParamId = "TCE_InfectedKilled",
			QuestId = "GrimerHamlet",
			requiredSectors = {
				"I19",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableNum', {
					AgainstVar = true,
					Prop = "HousesOpened",
					Prop2 = "RequiredHousesOpened",
					QuestId = "GrimerHamlet",
					QuestId2 = "GrimerHamlet",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "InfectedUnleashed",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('ExecuteCode', {
					FuncCode = "GrimerInfectedUnlockAllHouses()",
				}),
			},
			Once = true,
			ParamId = "TCE_UnlockAllHouses",
			QuestId = "GrimerHamlet",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('UnitIsAroundOtherUnit', {
							Distance = 8,
							SecondTargetUnit = "GrimerLovers",
							TargetUnit = "any merc",
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupSetSide', {
					Side = "enemy2",
					TargetUnit = "GrimerLovers",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "GrimerLovers",
				}),
			},
			Once = true,
			ParamId = "TCE_LoversEnemy",
			QuestId = "GrimerHamlet",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('GroupIsDead', {
					Group = "GrimerLovers",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "BellaKilled",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('GrantExperienceSector', {
					logImportant = true,
				}),
			},
			Once = true,
			ParamId = "TCE_LoversKilled",
			QuestId = "GrimerHamlet",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "InfectedUnleashed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.InfectedUnleashed
					end,
				}),
				PlaceObj('QuestIsVariableNum', {
					AgainstVar = true,
					Amount = 1,
					Prop = "CiviliansSaved",
					Prop2 = "MinimumSaved",
					QuestId = "GrimerHamlet",
					QuestId2 = "GrimerHamlet",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "InfectedUnleashedKilled" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.InfectedUnleashedKilled
					end,
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "PeopleSaved",
					QuestId = "GrimerHamlet",
				}),
			},
			Once = true,
			ParamId = "TCE_PeopleSaved",
			QuestId = "GrimerHamlet",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set( "InfectedUnleashed" ),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.InfectedUnleashed
					end,
				}),
				PlaceObj('GroupIsDead', {
					Group = "GrimerInfected",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "InfectedUnleashedKilled",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Given",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Medium",
					logImportant = true,
				}),
			},
			Once = true,
			ParamId = "TCE_InfectedUnleashedKilled",
			QuestId = "GrimerHamlet",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set({
	BellaKilled = true,
	Completed = false,
	Failed = false,
	InfectedKilled = true,
	InfectedUnleashedKilled = true,
	PeopleSaved = true,
}),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return quest.BellaKilled and not quest.Completed and not quest.Failed and quest.InfectedKilled and quest.InfectedUnleashedKilled and quest.PeopleSaved
					end,
				}),
				PlaceObj('CheckIsPersistentUnitDead', {
					per_ses_id = "NPC_Monday",
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I19",
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "Completed",
					QuestId = "GrimerHamlet",
				}),
				PlaceObj('SectorSetRAndROperation', {
					sector_id = "I19",
				}),
				PlaceObj('MusicSetSectorPlaylist', {
					MusicCombat = "Battle_Normal",
					MusicConflict = "Village_Conflict",
					MusicExploration = "Village_Complete",
					SectorID = "I19",
				}),
			},
			Once = true,
			ParamId = "TCE_CompleteQuest",
			QuestId = "GrimerHamlet",
			requiredSectors = {
				"I19",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GrimerHamlet",
					Vars = set({
	Completed = false,
	Failed = false,
	InfectedKilled = true,
	InfectedUnleashedKilled = true,
	PeopleSaved = false,
}),
					__eval = function ()
						local quest = gv_Quests['GrimerHamlet'] or QuestGetState('GrimerHamlet')
						return not quest.Completed and not quest.Failed and quest.InfectedKilled and quest.InfectedUnleashedKilled and not quest.PeopleSaved
					end,
				}),
				PlaceObj('QuestIsVariableNum', {
					AgainstVar = true,
					Amount = 1,
					Condition = "<",
					Prop = "CiviliansSaved",
					Prop2 = "MinimumSaved",
					QuestId = "GrimerHamlet",
					QuestId2 = "GrimerHamlet",
				}),
				PlaceObj('SectorIsInConflict', {
					Negate = true,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I19",
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "Failed",
					QuestId = "GrimerHamlet",
				}),
			},
			Once = true,
			ParamId = "TCE_Fail",
			QuestId = "GrimerHamlet",
			requiredSectors = {
				"I19",
			},
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "GivenLead",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "BellaMention",
		}),
		PlaceObj('QuestVarBool', {
			Name = "InfectedMention",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BellaQuest",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BellaKilled",
		}),
		PlaceObj('QuestVarBool', {
			Name = "PeopleSaved",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_LoversEnemy",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_LoversKilled",
		}),
		PlaceObj('QuestVarNum', {
			Name = "CiviliansSaved",
		}),
		PlaceObj('QuestVarNum', {
			Name = "MinimumSaved",
			Value = 4,
		}),
		PlaceObj('QuestVarBool', {
			Name = "InfectedKilled",
		}),
		PlaceObj('QuestVarNum', {
			Name = "HousesOpened",
		}),
		PlaceObj('QuestVarNum', {
			Name = "RequiredHousesOpened",
			Value = 3,
		}),
		PlaceObj('QuestVarBool', {
			Name = "InfectedUnleashed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "InfectedUnleashedKilled",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_InfectedKilled",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_UnlockAllHouses",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_PeopleSaved",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_InfectedUnleashedKilled",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_CompleteQuest",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Fail",
		}),
		PlaceObj('QuestVarNum', {
			Name = "TotalCiviliansToSave",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BirdCageExamined",
		}),
		PlaceObj('QuestVarBool', {
			Name = "BirdCageOpened",
		}),
		PlaceObj('QuestVarBool', {
			Name = "MoonshineStillFixed",
		}),
	},
	group = "Farmland",
	id = "GrimerHamlet",
})

