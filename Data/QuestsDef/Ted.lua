-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	DisplayName = T(485600763068, --[[QuestsDef Ted DisplayName]] "Of Murders and Teddy Bears"),
	KillTCEsConditions = {
		PlaceObj('QuestKillTCEsOnCompleted', {}),
	},
	NoteDefs = {
		LastNoteIdx = 5,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "K17",
				}),
				PlaceObj('QuestBadgePlacement', {
					Sector = "K19",
				}),
				PlaceObj('QuestBadgePlacement', {
					Sector = "J19",
				}),
				PlaceObj('QuestBadgePlacement', {
					Sector = "J20",
				}),
				PlaceObj('QuestBadgePlacement', {
					Sector = "K18",
				}),
				PlaceObj('QuestBadgePlacement', {
					Sector = "L19",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "Ted",
					Vars = set( "Completed", "TedMurder" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.Completed or quest.TedMurder
					end,
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set({
	Given = true,
	TedMurder = false,
}),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.Given and not quest.TedMurder
					end,
				}),
			},
			Text = T(894789535105, --[[QuestsDef Ted Text]] "There are rumors of <em>murders and teddy bears</em> in the Farmlands"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TeddyBear",
					Sector = "K17",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TeddyBear",
					Sector = "K19",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TeddyBear",
					Sector = "J19",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TeddyBear",
					Sector = "J20",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TeddyBear",
					Sector = "K18",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TeddyBear",
					Sector = "L19",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "TedSpawn" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.TedSpawn
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.Completed
					end,
				}),
			},
			Idx = 3,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "TedMurder" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.TedMurder
					end,
				}),
			},
			Text = T(300055589980, --[[QuestsDef Ted Text]] "Someone is murdering people in the Farmlands and placing <em>teddy bears</em> at the scene"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.Completed
					end,
				}),
			},
			Idx = 4,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "TedSpawn" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.TedSpawn
					end,
				}),
			},
			Text = T(493985783416, --[[QuestsDef Ted Text]] "Time to face the <em>teddy bear maniac</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.Completed
					end,
				}),
			},
			Idx = 5,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Ted",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['Ted'] or QuestGetState('Ted')
						return quest.Completed
					end,
				}),
			},
			Text = T(656608212394, --[[QuestsDef Ted Text]] "<em>Outcome:</em> <em>Teddy</em> the Teddy Bear killer was put to rest"),
		}),
	},
	QuestGroup = "Farmlands",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableNum', {
					AgainstVar = true,
					Prop = "TedClues",
					Prop2 = "TedRandom",
					QuestId = "Ted",
					QuestId2 = "Ted",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "TedSpawn",
					QuestId = "Ted",
				}),
				PlaceObj('MusicSetTrack', {
					Playlist = "Scripted",
					Track = "Music/Bloody Rocks",
				}),
				PlaceObj('SectorEnterConflict', {
					sector_id = "current",
				}),
			},
			Once = true,
			ParamId = "TCE_TedSpawn",
			QuestId = "Ted",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsOnMap', {
					TargetUnit = "Tedd",
				}),
			},
			Effects = {
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"TeddyBear_3_TedSpawned",
					},
					banterSequentialWaitFor = "BanterStart",
					searchInMap = true,
					searchInMarker = false,
				}),
				PlaceObj('GroupSetBehaviorRoam', {
					IdleStance = "Crouch",
					MarkerGroup = "TedMove",
					TargetUnit = "Tedd",
					UseWeapons = true,
				}),
			},
			ParamId = "TCE_TedRoam",
			QuestId = "Ted",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 3,
					SecondTargetUnit = "any merc",
					TargetUnit = "Tedd",
				}),
			},
			Effects = {
				PlaceObj('GroupSetSide', {
					Side = "enemy2",
					TargetUnit = "Tedd",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "Tedd",
				}),
			},
			Once = true,
			ParamId = "TCE_TedApproached",
			QuestId = "Ted",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('CheckIsPersistentUnitDead', {
					per_ses_id = "NPC_Ted",
				}),
			},
			Effects = {
				PlaceObj('GrantExperienceSector', {
					Amount = "XPQuestReward_Medium",
					logImportant = true,
				}),
				PlaceObj('CityGrantLoyalty', {
					Amount = 15,
					City = "Payak",
					SpecialConversationMessage = T(765307763049, --[[QuestsDef Ted SpecialConversationMessage]] "killed <em>Ted</em> the teddy bear maniac"),
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Completed",
					QuestId = "Ted",
				}),
			},
			Once = true,
			ParamId = "TCE_TedKilled",
			QuestId = "Ted",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "TedMurder",
		}),
		PlaceObj('QuestVarNum', {
			Name = "TedClues",
		}),
		PlaceObj('QuestVarNum', {
			Name = "TedRandom",
			RandomRangeMax = 13,
			Value = 9,
		}),
		PlaceObj('QuestVarBool', {
			Name = "TedSpawn",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TedSpawn",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TedApproached",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TedKilled",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_TedRoam",
		}),
	},
	group = "Farmland",
	id = "Ted",
})

