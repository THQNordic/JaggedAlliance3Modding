-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Vlad",
	Chapter = "Intro",
	Hidden = true,
	NoteDefs = {
		LastNoteIdx = 1,
	},
	QuestGroup = "Ernie Island",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitHasInteraction', {
					'TargetUnit', "any merc",
					'CombatAction', "Interact_Banter",
					'Group', "Billy",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ErnieSideQuests",
					Vars = {
						ProjectorFirstLine = false,
					},
					__eval = function ()
						local quest = gv_Quests['ErnieSideQuests'] or QuestGetState('ErnieSideQuests')
						return not quest.ProjectorFirstLine
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "ProjectorFirstLine",
					QuestId = "ErnieSideQuests",
				}),
			},
			Once = true,
			ParamId = "event_ProjectorFirstLine",
			QuestId = "ErnieSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitHasInteraction', {
					'TargetUnit', "any merc",
					'CombatAction', "Interact_Banter",
					'Group', "Billy",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ErnieSideQuests",
					Vars = {
						ProjectorFirstLine = true,
					},
					__eval = function ()
						local quest = gv_Quests['ErnieSideQuests'] or QuestGetState('ErnieSideQuests')
						return quest.ProjectorFirstLine
					end,
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ErnieSideQuests",
					Vars = {
						ProjectorLastLine = false,
					},
					__eval = function ()
						local quest = gv_Quests['ErnieSideQuests'] or QuestGetState('ErnieSideQuests')
						return not quest.ProjectorLastLine
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "ProjectorLastLine",
					QuestId = "ErnieSideQuests",
				}),
			},
			Once = true,
			ParamId = "event_ProjectorLastLine",
			QuestId = "ErnieSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('UnitIsAware', {
					TargetUnit = "BunkerEntrance_Guards",
				}),
				PlaceObj('PlayerIsPlayerTurn', {}),
			},
			Effects = {
				PlaceObj('SetTimer', {
					Label = T(409183280191, --[[QuestsDef ErnieSideQuests Label]] "Enemy reinforcements"),
					Name = "Reinforcements",
					Time = 30000,
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "RustReinforcmentsSpawn",
					QuestId = "ErnieSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_RustReinforcementsCounter",
			QuestId = "ErnieSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"H3",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "BunkerEntrance_Guards",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ErnieSideQuests",
					Vars = set({
	RustReinforcmentsSpawn = false,
}),
					__eval = function ()
						local quest = gv_Quests['ErnieSideQuests'] or QuestGetState('ErnieSideQuests')
						return not quest.RustReinforcmentsSpawn
					end,
				}),
			},
			Effects = {
				PlaceObj('KillTimer', {
					Name = "Reinforcements",
					StopTCE = true,
				}),
			},
			Once = true,
			ParamId = "TCE_RustReinforcementsStop",
			QuestId = "ErnieSideQuests",
			requiredSectors = {
				"H3",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('CheckOR', {
					Conditions = {
						PlaceObj('BanterHasPlayed', {
							Banters = {
								"StealthTutorialNPC_01",
							},
							WaitOver = true,
						}),
						PlaceObj('SectorCheckOwner', {
							sector_id = "I2",
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('GroupSetBehaviorExit', {
					IdleStance = "Standing",
					MarkerGroup = "West",
					Running = true,
					TargetUnit = "StealthTutorialNPC",
				}),
				PlaceObj('ConditionalEffect', {
					'Conditions', {
						PlaceObj('BanterHasPlayed', {
							Banters = {
								"StealthTutorialNPC_01",
							},
						}),
					},
					'Effects', {
						PlaceObj('CustomCodeEffect', {
							custom_code = "TutorialHintsState.ShowStealth = true",
						}),
					},
				}),
			},
			Once = true,
			ParamId = "TCE_StealthTutorialNPC_Exit",
			QuestId = "ErnieSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"I2",
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "ErnieSideQuests",
					Vars = set({
	TCE_StealthTutorialNPC_Exit = false,
}),
					__eval = function ()
						local quest = gv_Quests['ErnieSideQuests'] or QuestGetState('ErnieSideQuests')
						return not quest.TCE_StealthTutorialNPC_Exit
					end,
				}),
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 40,
					SecondTargetUnit = "any merc",
					TargetUnit = "StealthTutorialNPC",
				}),
			},
			Effects = {
				PlaceObj('CustomCodeEffect', {
					custom_code = 'local uIdx = table.findfirst(g_Units, function(i, u) return u:IsInGroup("StealthTutorialNPC") end) local un = uIdx and g_Units[uIdx] if un then un:SetActionCommand("ChangeStance", "", 0, "Crouch") end',
				}),
				PlaceObj('WaitNpcIdle', {
					TargetUnit = "StealthTutorialNPC",
				}),
				PlaceObj('GroupSetBehaviorPatrol', {
					IdleStance = "Crouch",
					MarkerGroup = "StealthNPCWaypoint",
					TargetUnit = "StealthTutorialNPC",
				}),
				PlaceObj('WaitNpcIdle', {
					TargetUnit = "StealthTutorialNPC",
				}),
				PlaceObj('BanterSetUnitInteraction', {
					Banters = {
						"StealthTutorialNPC_01",
					},
					TargetUnit = "StealthTutorialNPC",
				}),
			},
			Once = true,
			ParamId = "TCE_StealthTutorialNPC_SetPatrol",
			QuestId = "ErnieSideQuests",
			requiredSectors = {
				"I2",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('BanterHasPlayed', {
					Banters = {
						"StealthTutorialNPC_01",
					},
				}),
			},
			Effects = {
				PlaceObj('ExecuteCode', {
					FuncCode = "ShowStealthTutorialPopup()",
				}),
			},
			Once = true,
			ParamId = "TCE_StealthTutorialTalkedTo",
			QuestId = "ErnieSideQuests",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('SectorCheckOwner', {
					sector_id = "H4",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "FortressFirstCapture",
					QuestId = "ErnieSideQuests",
				}),
			},
			Once = true,
			ParamId = "TCE_FortressCaptured",
			QuestId = "ErnieSideQuests",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "ProjectorFirstLine",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "event_ProjectorFirstLine",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ProjectorRepaired",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ProjectorLastLine",
		}),
		PlaceObj('QuestVarNum', {
			Name = "ProjectorLoyaltyGain",
			Value = 5,
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "event_ProjectorLastLine",
		}),
		PlaceObj('QuestVarBool', {
			Name = "CrashExplored",
		}),
		PlaceObj('QuestVarBool', {
			Name = "CrashSalvaged",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Parts01",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Moonshine",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Tinhay",
		}),
		PlaceObj('QuestVarBool', {
			Name = "DeedeeExplosives",
		}),
		PlaceObj('QuestVarBool', {
			Name = "DeedeeDissuaded",
		}),
		PlaceObj('QuestVarBool', {
			Name = "DeedeeDead",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "Rust_MoundUnlockLoot",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Rust_MoundInitial",
		}),
		PlaceObj('QuestVarBool', {
			Name = "RustCross9_UnlockLoot",
		}),
		PlaceObj('QuestVarBool', {
			Name = "RustBunkerDeskIntelGiven",
		}),
		PlaceObj('QuestVarBool', {
			Name = "RustReinforcmentsSpawn",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_RustReinforcementsCounter",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_RustReinforcementsStop",
		}),
		PlaceObj('QuestVarNum', {
			Name = "RustReinforcemntsTurns",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_StealthTutorialNPC_SetPatrol",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_StealthTutorialNPC_Exit",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_StealthTutorialTalkedTo",
		}),
		PlaceObj('QuestVarBool', {
			Name = "FortressFirstCapture",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_FortressCaptured",
		}),
	},
	group = "Ernie",
	id = "ErnieSideQuests",
})

