-- ========== GENERATED BY QuestsDef Editor (Ctrl-Alt-Q) DO NOT EDIT MANUALLY! ==========

PlaceObj('QuestsDef', {
	Author = "Boyan",
	Chapter = "Act1",
	DevNotes = "Completed in the first Greeting of conversation Butler_2.\nFailed when Butler killed. \nNote: the TCE that announces his death will stop working once you complete the quest.",
	DisplayName = T(428596092953, --[[QuestsDef GhostStories DisplayName]] "The Haunted Mansion"),
	KillTCEsConditions = {
		PlaceObj('QuestIsVariableBool', {
			Condition = "or",
			QuestId = "GhostStories",
			Vars = set( "Completed", "Failed" ),
			__eval = function ()
				local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
				return quest.Completed or quest.Failed
			end,
		}),
	},
	NoteDefs = {
		LastNoteIdx = 37,
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "G8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "ButlerDead", "ButlerStory" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead or quest.ButlerStory
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "ButlerDead", "LeadGhost" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead or quest.LeadGhost
					end,
				}),
			},
			Idx = 15,
			Scouting = true,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set({
	Given = false,
	LeadGhost = false,
}),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return not quest.Given and not quest.LeadGhost
					end,
				}),
			},
			Text = T(255198018232, --[[QuestsDef GhostStories Text]] "There is a <em>treasure</em> at the haunted <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "G8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "ButlerDead", "ButlerStory" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead or quest.ButlerStory
					end,
				}),
			},
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "LeadGhost" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.LeadGhost
					end,
				}),
			},
			Text = T(945461969328, --[[QuestsDef GhostStories Text]] "There is a <em>treasure</em> at the <em><SectorName('G8')></em> that is supposedly guarded by a <em>ghost</em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "G8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set( "MansionTreasureTaken" ),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.MansionTreasureTaken
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set( "Failed" ),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.Failed
					end,
				}),
			},
			Idx = 37,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set( "MansionTreasureMentioned" ),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.MansionTreasureMentioned
					end,
				}),
			},
			Text = T(929883750147, --[[QuestsDef GhostStories Text]] "There is <em>treasure</em> in the <em><SectorName('G8')></em>, but the Butler won't give it up until the owner agrees"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "G8",
				}),
			},
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 3,
							Prop = "GhostClues",
							QuestId = "GhostStories",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GhostStories",
							Vars = set( "GhostSeen", "LeadGhost" ),
							__eval = function ()
								local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
								return quest.GhostSeen or quest.LeadGhost
							end,
						}),
					},
				}),
			},
			Idx = 19,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.Given
					end,
				}),
			},
			Text = T(677185546043, --[[QuestsDef GhostStories Text]] "There is a sense of mystery around the <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "GhostStoreis_Body1",
					Sector = "G8",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "GhostStoreis_Body2",
					Sector = "G8",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "GhostStoreis_Van",
					Sector = "G8",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "TrapDoor",
					Sector = "G8",
				}),
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "GhostStories_DeskMines",
					Sector = "G8_Underground",
				}),
			},
			CompletionConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GhostStories",
							Vars = set( "ButlerDead", "ButlerStory" ),
							__eval = function ()
								local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
								return quest.ButlerDead or quest.ButlerStory
							end,
						}),
						PlaceObj('QuestIsVariableNum', {
							Amount = 4,
							Prop = "GhostClues",
							QuestId = "GhostStories",
						}),
					},
				}),
			},
			Idx = 7,
			ShowConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableNum', {
							Amount = 1,
							Prop = "GhostClues",
							QuestId = "GhostStories",
						}),
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GhostStories",
							Vars = set( "GhostSeen" ),
							__eval = function ()
								local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
								return quest.GhostSeen
							end,
						}),
					},
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "Given" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.Given
					end,
				}),
			},
			Text = T(932263840893, --[[QuestsDef GhostStories Text]] "<em><GhostClues> Clue(s)</em> gathered about the <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueVan" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueVan
					end,
				}),
			},
			Idx = 25,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueVan" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueVan
					end,
				}),
			},
			Text = T(373525966829, --[[QuestsDef GhostStories Text]] "Clue: There are <em>explosives</em> hidden in the old van"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueBody" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueBody
					end,
				}),
			},
			Idx = 27,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueBody" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueBody
					end,
				}),
			},
			Text = T(878441392672, --[[QuestsDef GhostStories Text]] "Clue: Someone is shifting the <em>landmines</em> around the mansion"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueDesk" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueDesk
					end,
				}),
			},
			Idx = 26,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueDesk" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueDesk
					end,
				}),
			},
			Text = T(820301966067, --[[QuestsDef GhostStories Text]] "Clue: Someone has been crafting <em>land mines</em> in the mansion cellar"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueButler" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueButler
					end,
				}),
			},
			Idx = 28,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ClueButler" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ClueButler
					end,
				}),
			},
			Text = T(559325940241, --[[QuestsDef GhostStories Text]] 'Clue: The <em>"Ghost"</em> turned out to be the former <em>Butler</em> of the Abandoned Mansion'),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "G8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "GhostSeen" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.GhostSeen
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "ButlerDead" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead
					end,
				}),
			},
			Idx = 2,
			ShowConditions = {
				PlaceObj('QuestIsVariableNum', {
					Amount = 3,
					Prop = "GhostClues",
					QuestId = "GhostStories",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set({
	GhostSeen = false,
}),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return not quest.GhostSeen
					end,
				}),
			},
			Text = T(811767074610, --[[QuestsDef GhostStories Text]] "Someone has been playing with <em>explosives</em> at the <em><SectorName('G8')></em>, but they are nowhere to be seen. Perhaps they come out at <em>night</em>?"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "GhostStoreis_HypoSwitch",
					Sector = "G8",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "TrapDoorUnlocked" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.TrapDoorUnlocked
					end,
				}),
			},
			Idx = 3,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "HippoEnabled" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.HippoEnabled
					end,
				}),
			},
			Text = T(956961968423, --[[QuestsDef GhostStories Text]] "The mechanism for opening the <em>storm cellar door</em> is somewhere nearby"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Butler",
					Sector = "G8_Underground",
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "ButlerDead", "ButlerStory" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead or quest.ButlerStory
					end,
				}),
			},
			Idx = 10,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "GhostSeen" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.GhostSeen
					end,
				}),
			},
			Text = T(143363894691, --[[QuestsDef GhostStories Text]] 'The <em>"ghost"</em> has hidden in the <em>cellar</em> of the <em><SectorName(\'G8\')></em>'),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('QuestIsVariableBool', {
							Condition = "or",
							QuestId = "GhostStories",
							Vars = set( "Completed", "LegionKilled", "TriggerThugSpawn" ),
							__eval = function ()
								local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
								return quest.Completed or quest.LegionKilled or quest.TriggerThugSpawn
							end,
						}),
					},
				}),
			},
			Idx = 23,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set({
	ButlerStory = true,
	LegionKilled = false,
}),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerStory and not quest.LegionKilled
					end,
				}),
			},
			Text = T(629502206236, --[[QuestsDef GhostStories Text]] "The <em>Ghost Butler</em> won't come out while there are Legion soldiers in the mansion"),
		}),
		PlaceObj('QuestNote', {
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					Condition = "or",
					QuestId = "GhostStories",
					Vars = set( "Completed", "TriggerThugSpawn" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.Completed or quest.TriggerThugSpawn
					end,
				}),
			},
			Idx = 24,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ButlerStory", "LegionKilled" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerStory and quest.LegionKilled
					end,
				}),
			},
			Text = T(929105465854, --[[QuestsDef GhostStories Text]] "The <em>Ghost Butler</em> is still hiding in the <em>cellar</em> of the <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					Sector = "G8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ThugsKilled" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ThugsKilled
					end,
				}),
			},
			Idx = 8,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "TriggerThugSpawn" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.TriggerThugSpawn
					end,
				}),
			},
			Text = T(296538024131, --[[QuestsDef GhostStories Text]] "There are a bunch of <em>Fleatown thugs</em> outside looking for the alleged <em>treasure</em> of the <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			Badges = {
				PlaceObj('QuestBadgePlacement', {
					BadgeUnit = "Butler",
					Sector = "G8",
				}),
			},
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "Completed" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.Completed
					end,
				}),
			},
			HideConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ButlerDead" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead
					end,
				}),
			},
			Idx = 22,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ThugsKilled" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ThugsKilled
					end,
				}),
			},
			Text = T(516081914975, --[[QuestsDef GhostStories Text]] "Time to have a word with the <em>Ghost Butler</em> from the <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set({
	ButlerDead = false,
	Completed = true,
}),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return not quest.ButlerDead and quest.Completed
					end,
				}),
			},
			Idx = 29,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set({
	ButlerDead = false,
	Completed = true,
}),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return not quest.ButlerDead and quest.Completed
					end,
				}),
			},
			Text = T(531402465778, --[[QuestsDef GhostStories Text]] "<em>Outcome:</em> Helped the <em>Ghost Butler</em> reclaim the <em><SectorName('G8')></em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set( "MansionTreasureTaken", "MansionTreasureTricked" ),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.MansionTreasureTaken and quest.MansionTreasureTricked
					end,
				}),
			},
			Idx = 31,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set( "MansionTreasureTaken", "MansionTreasureTricked" ),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.MansionTreasureTaken and quest.MansionTreasureTricked
					end,
				}),
			},
			Text = T(170577291499, --[[QuestsDef GhostStories Text]] "<em>Outcome:</em> Tricked the <em>Ghost Butler</em> and took the <em>treasure</em>"),
		}),
		PlaceObj('QuestNote', {
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set({
	MansionTreasureTaken = true,
	MansionTreasureTricked = false,
}),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.MansionTreasureTaken and not quest.MansionTreasureTricked
					end,
				}),
			},
			Idx = 35,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "Hermit",
					Vars = set({
	MansionTreasureTaken = true,
	MansionTreasureTricked = false,
}),
					__eval = function ()
						local quest = gv_Quests['Hermit'] or QuestGetState('Hermit')
						return quest.MansionTreasureTaken and not quest.MansionTreasureTricked
					end,
				}),
			},
			Text = T(351729107798, --[[QuestsDef GhostStories Text]] "<em>Outcome:</em> Got the <em>treasure</em> as a reward for helping the <em>Ghost Butler</em> find <em>Mr. Ditch</em>"),
		}),
		PlaceObj('QuestNote', {
			AddInHistory = true,
			CompletionConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ButlerDead" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead
					end,
				}),
			},
			Idx = 5,
			ShowConditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "ButlerDead" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.ButlerDead
					end,
				}),
			},
			Text = T(207166617772, --[[QuestsDef GhostStories Text]] '<em>Outcome:</em> The <em>"Ghost"</em> of the <em><SectorName(\'G8\')></em> is dead'),
		}),
	},
	QuestGroup = "Savanah",
	TCEs = {
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('OR', {
					Conditions = {
						PlaceObj('BanterHasPlayed', {
							Banters = {
								"GhostStories_OverheardConversation_Legion",
							},
							WaitOver = true,
						}),
						PlaceObj('BanterHasPlayed', {
							Banters = {
								"GhostStories_OverheardConversation_Thugs_01",
							},
						}),
					},
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "LeadGhost",
					QuestId = "GhostStories",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "Given",
					QuestId = "GhostStories",
				}),
			},
			Once = true,
			ParamId = "TCE_Notes",
			QuestId = "GhostStories",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"G8",
					},
				}),
				PlaceObj('UnitIsAroundOtherUnit', {
					Distance = 8,
					SecondTargetUnit = "any merc",
					TargetUnit = "Ghost",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "Given",
					QuestId = "GhostStories",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "GhostSeen",
					QuestId = "GhostStories",
				}),
				PlaceObj('QuestSetVariableBool', {
					Prop = "HippoEnabled",
					QuestId = "GhostStories",
				}),
				PlaceObj('QuestSetVariableNum', {
					Amount = 1,
					Prop = "GhostClues",
					QuestId = "GhostStories",
				}),
				PlaceObj('LogMessageAdd', {
					message = T(801088755638, --[[QuestsDef GhostStories message]] "Gained a <em>clue</em> about the <em>Ghost</em>"),
				}),
				PlaceObj('GroupSetBehaviorIdle', {
					TargetUnit = "Ghost",
				}),
				PlaceObj('PlaySetpiece', {
					setpiece = "GhostStories_RunAway",
				}),
			},
			Once = true,
			ParamId = "TCE_GhostEncounter",
			QuestId = "GhostStories",
			requiredSectors = {
				"G8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"G8",
					},
				}),
				PlaceObj('GroupIsDead', {
					Group = "EnemySquad",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "LegionKilled",
					QuestId = "GhostStories",
				}),
			},
			Once = true,
			ParamId = "TCE_LegionEliminated",
			QuestId = "GhostStories",
			requiredSectors = {
				"G8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "TriggerThugSpawn" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.TriggerThugSpawn
					end,
				}),
			},
			Effects = {
				PlaceObj('UnitApplyAppearance', {
					Appearance = "Butler",
					TargetUnit = "Butler",
				}),
				PlaceObj('PlayBanterEffect', {
					Banters = {
						"GhostStoriesMansion_Thugs_01",
					},
					FallbackToMerc = true,
					searchInMarker = false,
				}),
				PlaceObj('SectorSetForceConflict', {
					force = true,
					sector_id = "G8",
				}),
			},
			Once = true,
			ParamId = "TCE_BatnerAfterTalkingToButler",
			QuestId = "GhostStories",
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set({
	Completed = false,
}),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return not quest.Completed
					end,
				}),
				PlaceObj('PlayerIsInSectors', {
					Sectors = {
						"G8",
					},
				}),
				PlaceObj('PlayerSquadPresentInSectors', {
					Negate = true,
					Sector = "G8_Underground",
				}),
				PlaceObj('QuestIsVariableBool', {
					QuestId = "GhostStories",
					Vars = set( "TriggerThugSpawn" ),
					__eval = function ()
						local quest = gv_Quests['GhostStories'] or QuestGetState('GhostStories')
						return quest.TriggerThugSpawn
					end,
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "SpawnThugs",
					QuestId = "GhostStories",
				}),
				PlaceObj('PlaySetpiece', {
					setpiece = "GhostStories_FinalBattleIntro",
				}),
				PlaceObj('GroupAlert', {
					TargetUnit = "ThugSpawn",
				}),
			},
			Once = true,
			ParamId = "TCE_ThugBanter",
			QuestId = "GhostStories",
			requiredSectors = {
				"G8",
			},
		}),
		PlaceObj('TriggeredConditionalEvent', {
			Conditions = {
				PlaceObj('GroupIsDead', {
					Group = "ThugSpawn",
				}),
			},
			Effects = {
				PlaceObj('QuestSetVariableBool', {
					Prop = "ThugsKilled",
					QuestId = "GhostStories",
				}),
				PlaceObj('GroupSetBehaviorRoam', {
					MarkerGroup = "Defender_MainHall",
					MarkerType = "Defender",
					TargetUnit = "Butler",
				}),
			},
			Once = true,
			ParamId = "TCE_ThugsKilled",
			QuestId = "GhostStories",
		}),
	},
	Variables = {
		PlaceObj('QuestVarBool', {
			Name = "LeadGhost",
		}),
		PlaceObj('QuestVarBool', {
			Name = "HippoEnabled",
		}),
		PlaceObj('QuestVarBool', {
			Name = "TrapDoorUnlocked",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ButlerStory",
		}),
		PlaceObj('QuestVarBool', {
			Name = "StartCombat_Ghost",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ButlerDead",
		}),
		PlaceObj('QuestVarNum', {
			Name = "GhostClues",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ClueDesk",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ClueBody",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ClueVan",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ClueButler",
		}),
		PlaceObj('QuestVarBool', {
			Name = "LegionKilled",
		}),
		PlaceObj('QuestVarBool', {
			Name = "SpawnThugs",
		}),
		PlaceObj('QuestVarBool', {
			Name = "ThugsKilled",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_Notes",
		}),
		PlaceObj('QuestVarNum', {
			Name = "Randomizer",
			RandomRangeMax = 2,
			Value = 1,
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_GhostEncounter",
		}),
		PlaceObj('QuestVarBool', {
			Name = "GhostSeen",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_LegionEliminated",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ThugBanter",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_ThugsKilled",
		}),
		PlaceObj('QuestVarTCEState', {
			Name = "TCE_BatnerAfterTalkingToButler",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Completed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Given",
		}),
		PlaceObj('QuestVarBool', {
			Name = "Failed",
		}),
		PlaceObj('QuestVarBool', {
			Name = "NotStarted",
			Value = true,
		}),
		PlaceObj('QuestVarBool', {
			Name = "TriggerThugSpawn",
		}),
	},
	group = "Jungle",
	id = "GhostStories",
})

